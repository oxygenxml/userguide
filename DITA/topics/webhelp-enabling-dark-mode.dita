<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="webhelp-enabling-dark-mode">
  <title>How to Enable Dark Mode in the Output</title>
  <prolog>
    <metadata>
      <keywords>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>CSS styling</indexterm></indexterm>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>Customizing output with CSS</indexterm></indexterm>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>Dark mode</indexterm></indexterm>
        <indexterm product="webhelp-responsive ope">CSS styling</indexterm>
        <indexterm product="webhelp-responsive ope">Customizing output with CSS</indexterm>
        <indexterm product="webhelp-responsive ope">Dark mode</indexterm>
      </keywords>
      <keywords>
        <keyword outputclass="label" product="webhelp-responsive">Dark Mode</keyword>
        <keyword outputclass="label" product="webhelp-responsive">CSS Styling</keyword>
      </keywords>
    </metadata>
  </prolog>
  <taskbody><context>
      <p>The WebHelp Responsive output supports dark mode, allowing users to switch between light
        and dark themes based on their preference or their browser's settings. This feature enhances
        readability and reduces eye strain in low-light environments.</p>
      <note id="note_eh4_l2v_lfc" type="fastpath">Both <b>Light</b> and <b>Oxygen</b> templates
        support dark mode, providing you with complete examples to explore.</note>
      <p>By default, the plugin only provides color variables for the light theme, as
        follows:<codeblock id="codeblock_q43_vcv_lfc" outputclass="language-css">:root {
  --wh-body-bg: #fff;
  --wh-body-color: #000;
  --wh-border-color: #000;
  --wh-link-color: #0d6efd;
  --wh-search-bg: #ddd;
  --wh-letters-bg: #f2f2f2;
  --wh-main-page-toc-bg: #eeeeee;
  --wh-toc-shortdesc-color: #808080;
  --wh-top-menu-bg: #e6e6e6;
  --wh-oxy-change-bg: #ffff00;
}</codeblock></p>
    </context>
    <steps id="steps_bvt_jy5_lfc">
      <stepsection>To enable the dark theme, follow these steps:</stepsection>
      <step>
        <cmd>If you have not already created a Publishing Template, see <xref
            href="whr-create-publishing-template.dita"/>.</cmd>
      </step>
      <step>
        <cmd>Create a custom CSS stylesheet (<filepath>custom-color.css</filepath> for example) and
          copy the default variables you want to override, for example:</cmd>
        <info>
          <codeblock id="codeblock_e2g_kdv_lfc" outputclass="language-css">:root {
  --wh-search-bg: #ECF2F9;
  --wh-main-page-toc-bg: #F2F8FF;
  --wh-toc-shortdesc-color: #0D1A2B;
}</codeblock>
        </info>
      </step>
      <step>
        <cmd>Duplicate the default variables for the dark color scheme (identified with
            <xmlatt>data-wh-theme="dark"</xmlatt>), for example:</cmd>
        <info>
          <codeblock id="codeblock_xph_gdv_lfc" outputclass="language-css">:root[data-wh-theme="dark"] {
  color-scheme: dark;
  --wh-body-bg: #212529;
  --wh-body-color: #e3e3e3;
  --wh-border-color: #e3e3e3;
  --wh-link-color: #5185cb;
  --wh-search-bg: #2b3035;
  --wh-letters-bg: #2a2a2a;
  --wh-main-page-toc-bg: #22303c;
  --wh-toc-shortdesc-color: #d5d5d5;
  --wh-top-menu-bg: var(--wh-search-bg);
  --wh-oxy-change-bg: #b59f00;
}</codeblock>
        </info>
      </step>
      <step>
        <cmd>Add custom additional variables for elements that you need two color or images
          variants, for example:</cmd>
        <info>
          <codeblock id="codeblock_xl4_xz5_lfc" outputclass="language-css">:root {
  --wh-search-bg: #ECF2F9;
  --wh-main-page-toc-bg: #F2F8FF;
  --wh-toc-shortdesc-color: #0D1A2B;

  --wh-tile-shortdesc-color: var(--wh-toc-shortdesc-color);
  --wh-tile-bg: #ECF2F9;
  --wh-breadcrumb-bg: #ECF2F9;
  --wh-publication-toc-bg: #F8F8F8;
  --wh-search-input-bg: #2771bb;

  --wh-search-image-small: url("resources/images/bgr_right_small.png");
}

:root[data-wh-theme="dark"] {
  color-scheme: dark;
  --wh-body-bg: #212529;
  --wh-body-color: #e3e3e3;
  --wh-border-color: #e3e3e3;
  --wh-link-color: #5185cb;
  --wh-search-bg: #2b3035;
  --wh-letters-bg: #2a2a2a;
  --wh-main-page-toc-bg: #22303c;
  --wh-toc-shortdesc-color: #d5d5d5;
  --wh-top-menu-bg: var(--wh-search-bg);
  --wh-oxy-change-bg: #b59f00;

  --wh-tile-shortdesc-color: var(--wh-toc-shortdesc-color);
  --wh-tile-bg: #2B3035;
  --wh-breadcrumb-bg: #2B3035;
  --wh-publication-toc-bg: #343A40;
  --wh-search-input-bg: #184573;

  --wh-search-image-small: url("resources/images/bgr_right_small_dark.png");
}</codeblock>
        </info>
      </step>
      <step>
        <cmd>Open the <xref href="whr_publishing_template_contents.dita#template_descritpor_file"
            >template descriptor file</xref> associated with your publishing template and add your
          custom CSS in the <term>resources</term> section.</cmd>
        <info>
          <codeblock id="codeblock_cq2_hdq_rfc" outputclass="language-xml">&lt;publishing-template>
    ...
    &lt;webhelp>
        ...
        &lt;resources>
            &lt;css file="custom-color.css"/></codeblock>
        </info>
      </step>
      <step>
        <cmd>Create another custom CSS stylesheet (<filepath>custom.css</filepath> for example) and
          add CSS rules using the custom created variables, for example:</cmd>
        <info>
          <note id="note_vtq_f2v_lfc">Default rules with color variables (such as
              <codeph>--wh-body-color</codeph>) will automatically use the new colors.</note>
          <codeblock id="codeblock_lxc_sdv_lfc" outputclass="language-css">.wh_tile {
  background-color: var(--wh-tile-bg);
}
.wh_tile_shortdesc{
  color: var(--wh-tile-shortdesc-color);
}
.wh_tools{
  background-color: var(--wh-breadcrumb-bg);
}
.wh_publication_toc{
  background-color: var(--wh-publication-toc-bg);
}
.wh_search_input{
  background: var(--wh-search-image-small) right no-repeat var(--wh-search-input-bg);
}</codeblock>
        </info>
      </step>
      <step>
        <cmd>Add the second stylesheet and the parameter in the template descriptor:</cmd>
        <info>
          <codeblock id="codeblock_cmf_zdq_rfc" outputclass="language-xml">&lt;publishing-template>
    ...
    &lt;webhelp>
        ...
        &lt;resources>
            &lt;css file="custom-color.css"/>
            &lt;css file="custom.css"/>
        &lt;/resources>
        ...
        &lt;parameters>
            ...
            &lt;parameter name="webhelp.enable.dark.mode" value="yes"/>
        &lt;/parameters></codeblock>
        </info>
      </step>
      <step>
        <cmd>Duplicate the <term>DITA Map WebHelp Responsive</term> transformation scenario.</cmd>
      </step>
      <step>
        <cmd>Click the <uicontrol>Choose Custom Publishing Template</uicontrol> link and select your
          template.</cmd>
      </step>
      <step>
        <cmd>Click <uicontrol>OK</uicontrol> to save the changes, then run the transformation
          scenario.</cmd>
      </step>
    </steps>
    <result id="result_l4c_wp3_rfc">
      <p>The output will use the theme selected in the browser's settings and a "Switch theme"
        button will be displayed in the header.</p>
      <note id="note_g1t_gq3_rfc" type="restriction">If you test locally in <b>Firefox</b>, the
        theme settings may not persist between pages. This happens because Firefox treats each local
        page as a separate origin, preventing shared storage of theme preferences. If you host the
        output or use another browser, theme settings will persist.</note>
    </result></taskbody>
  <related-links>
    <link href="webhelp-customizing-with-css.dita#whr-browser-inspect"/>
  </related-links>
</task>
