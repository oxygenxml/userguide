<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="webhelp-enabling-dark-mode">
  <title>How to Enable Dark Mode in the Output</title>
  <prolog>
    <metadata>
      <keywords>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>CSS styling</indexterm></indexterm>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>Customizing output with CSS</indexterm></indexterm>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>Dark mode</indexterm></indexterm>
        <indexterm product="webhelp-responsive ope">CSS styling</indexterm>
        <indexterm product="webhelp-responsive ope">Customizing output with CSS</indexterm>
        <indexterm product="webhelp-responsive ope">Dark mode</indexterm>
      </keywords>
      <keywords>
        <keyword outputclass="label" product="webhelp-responsive">Dark Mode</keyword>
        <keyword outputclass="label" product="webhelp-responsive">CSS Styling</keyword>
      </keywords>
    </metadata>
  </prolog>
  <body>
      <p>The WebHelp Responsive output supports dark mode, allowing users to switch between light
      and dark themes based on their preference or their browser's settings. The dark mode feature
      enhances readability and reduces eye strain in low-light environments.</p>
    <p>After enabling dark mode, the output will use the theme selected in the browser's settings
      and a "Switch theme" button will be displayed in the header.</p>
    <p>By default, the WebHelp plugin only provides color variables for the light theme in the
        <filepath>wh-color.css</filepath> stylesheet.</p>
    <note id="note_eh4_l2v_lfc" type="fastpath"><b>Light</b> and <b>Oxygen</b> templates come with
      both light and dark color schemes.</note>
    <section id="section_wrm_4jr_rfc">
      <title>How to Add Dark Mode in a New Publishing Template</title>
      <ol id="steps_bvt_jy5_lfc">
        <li>Create a Publishing Template, see <xref
            href="whr-create-publishing-template.dita#whr-create-publishing-template/creating_a_template_starting_from_scratch"
          />.</li>
        <li>Create a custom CSS stylesheet (<filepath>custom-color.css</filepath> for example) and
          copy the default variables you want to override, for
          example:<codeblock id="codeblock_e2g_kdv_lfc" outputclass="language-css">:root {
  /* Override default colors */
  --wh-main-page-toc-bg: #eee;
  --wh-toc-shortdesc-color: #808080;

  --wh-link-color: #0d6efd;
  --wh-tooltip-color: #444;
}</codeblock></li>
        <li>Add custom additional variables for elements that you need two color or image variants,
          for example:<codeblock id="codeblock_xl4_xz5_lfc" outputclass="language-css">:root {
  /* Override default colors */
  --wh-main-page-toc-bg: #f2f8ff;
  --wh-toc-shortdesc-color: #0d1a2b;

  --wh-link-color: #337ab7;
  --wh-tooltip-color: #5185cb;

  /* New color variables */
  --wh-tile-bg: #ecf2f9;
  --wh-tile-link-color: #3077be;
  --wh-tile-shortdesc-color: var(--wh-toc-shortdesc-color);
  --wh-breadcrumb-bg: var(--wh-search-bg);

  /* Image variable */
  --wh-search-image: url("resources/images/bgr_right.png");
}</codeblock></li>
        <li>Duplicate the default variables (from <filepath>wh-color.css</filepath>) for the dark
          color scheme and replace the
          values:<codeblock id="codeblock_jdl_ldx_vfc" outputclass="language-css">:root[data-wh-theme="dark"] {
  color-scheme: dark;
  --wh-primary-bg: #212529;
  --wh-primary-color: #e3e3e3;
  --wh-secondary-bg: #212529;
  --wh-secondary-color: #e3e3e3;
  --wh-strong-color: #272727;
  --wh-soft-color: #3a3a3a;
  --wh-subtle-color: #454545;

  --wh-top-menu-bg: #2b3035;
  --wh-main-page-toc-bg: #22303c;
  --wh-main-page-toc-border: #c0c0c0;
  --wh-toc-shortdesc-color: #d5d5d5;
  --wh-close-toc-icon-border: var(--wh-primary-color);
  --wh-close-toc-button-shadow: rgba(255,255,255,.16);
  --wh-go2top-bg: #444;
  --wh-go2top-border: #999;
  --wh-toggle-border: #347bb7;

  --wh-link-color: #5185cb;
  --wh-label-color: #666;
  --wh-pre-bg: #444;
  --wh-tooltip-color: #184573;
  --wh-boolean-color: #4aff00;
  --wh-state-color: #ff6000;
  --wh-syntaxdiagram-color: #ca6000;
  --wh-markup-color: #639;
  --wh-fig-border: #c0c0c0;
  --wh-caution-bg: #ffd100;
  --wh-danger-bg: #c8102e;
  --wh-warning-bg: #ff8200;
  --wh-hazardstatement-bg: #0072ce;
  --wh-indexterm-bg: #8b00b5;

  /* Search */
  --wh-search-color: #a2311a;
  --wh-search-breadcrumb-color: #fafafa;
  --wh-search-fake-text-bg: #fffcf8;
  --wh-search-fake-text-shimmer: #fff;
  --wh-search-facets-bg: #ffc3f3;
  --wh-search-facets-disabled-color: #ee9f9a;
  --wh-search-facets-border: #ffe3db;
  --wh-search-results-facets-bg: #fff0e8;
  --wh-search-results-facets-color: #503923;
  --wh-highlight-bg: #ffc844;
  --wh-scroll-bg: #ffbfb2;

  /* Change Tracking */
  --wh-oxy-delete-color: #ff6000;
  --wh-oxy-insert-color: #4a60ff;
  --wh-oxy-change-done-color: #d4d4b0;
  --wh-oxy-range-color: #ca6000;
  --wh-oxy-comment-border: #ffd541;
  --wh-oxy-change-bg: #b59f00;
  --wh-oxy-attributes-footnote-bg: #007f8f;
  --wh-oxy-comment-footnote-bg: #b5ad0a;
  --wh-oxy-delete-footnote-bg: #8b3030;
  --wh-oxy-insert-footnote-bg: #6969b5;

  /* Syntax Highlight */
  --wh-hl-json_key-color: #c3baff;
  --wh-hl-keyword-color: #f300ab;
  --wh-hl-string-color: #9a00ff;
  --wh-hl-comment-color: #4cfa00;
  --wh-hl-directive-color: #ff7cff;
  --wh-hl-tag-color: #4a60ff;
  --wh-hl-attribute-color: #ffcd35;
  --wh-hl-value-color: #ff8735;
  --wh-hl-html-color: #4a60ff;
  --wh-hl-xsl-color: #48ffff;
  --wh-hl-annotation-color: #d4d4b0;
  --wh-hl-tag-doctype-comment-color: #89b3ff;
  --wh-hl-tag-doctype-color: #4a60ff;

  /* OpenAPI */
  --wh-openapi-border: #515151;
  --wh-openapi-post-bg: #4eb86f; 
  --wh-openapi-get-bg: #56a3d9;
  --wh-openapi-delete-bg: #8b5c56;
  --wh-openapi-put-bg: #8b7b53;
  --wh-openapi-head-bg: #7f6ba5;

  /* New color variables */
  --wh-tile-bg: var(--wh-top-menu-bg);
  --wh-tile-link-color: #6fa1cc;
  --wh-tile-shortdesc-color: var(--wh-toc-shortdesc-color);
  --wh-breadcrumb-bg: var(--wh-top-menu-bg);

  /* Image variable */
  --wh-search-image: url("resources/images/bgr_right_dark.png");
}</codeblock></li>
        <li>Open the <xref href="whr_publishing_template_contents.dita#template_descritpor_file"
            >template descriptor file</xref> associated with your publishing template and add your
          custom CSS in the <term>resources</term>
          section:<codeblock id="codeblock_cq2_hdq_rfc" outputclass="language-xml">&lt;publishing-template>
    ...
    &lt;webhelp>
        ...
        &lt;resources>
            &lt;css file="custom-color.css"/></codeblock></li>
        <li>Create another custom CSS stylesheet (<filepath>custom.css</filepath> for example) and
          add CSS rules using the custom created variables, for
            example:<codeblock id="codeblock_lxc_sdv_lfc" outputclass="language-css">.wh_tile {
  background-color: var(--wh-tile-bg);
}
.wh_tools {
  background-color: var(--wh-breadcrumb-bg);
}
.wh_search_input {
  background: var(--wh-search-image-small) right no-repeat var(--wh-soft-color);
}</codeblock><note id="note_vtq_f2v_lfc">Default CSS rules with color variables (such as
              <codeph>body { background-color: var(--wh-primary-bg); }</codeph> in
              <filepath>wh-common.css</filepath>) will automatically use the new colors.</note></li>
        <li>Add the second stylesheet and the parameter in the template
          descriptor:<codeblock id="codeblock_cmf_zdq_rfc" outputclass="language-xml">&lt;publishing-template>
    ...
    &lt;webhelp>
        ...
        &lt;resources>
            &lt;css file="custom-color.css"/>
            &lt;css file="custom.css"/>
        &lt;/resources>
        ...
        &lt;parameters>
            ...
            &lt;parameter name="webhelp.enable.dark.mode" value="yes"/>
        &lt;/parameters></codeblock></li>
        <li>Duplicate the <term>DITA Map WebHelp Responsive</term> transformation scenario.</li>
        <li>Click the <uicontrol>Choose Custom Publishing Template</uicontrol> link and select your
          template.</li>
        <li>Click <uicontrol>OK</uicontrol> to save the changes, then run the transformation
          scenario.</li>
      </ol>
    </section>
    <section id="section_snm_ckr_rfc">
      <title>How to Add Dark Mode in a Publishing Template Copied from an Existing Template</title>
      <ol id="ol_esr_blr_rfc">
        <li>Copy an existing Publishing Template (see <xref
            href="whr-create-publishing-template.dita#whr-create-publishing-template/creating_a_template_starting_from_an_existing_tem"
          />).</li>
        <li>Add or edit the <filepath>color.css</filepath> stylesheet with the colors you want to
          add/change:<codeblock id="codeblock_o1y_qmr_rfc" outputclass="language-css">:root {
  --wh-primary-bg: #fff;
  --wh-primary-color: #000;
  ...
}
:root[data-wh-theme="dark"] {
  color-scheme: dark;
  --wh-primary-bg: #293136;
  --wh-primary-color: #e3e3e3;
  ...
}</codeblock></li>
        <li importance="optional">If you create a <filepath>color.css</filepath> stylesheet, open
          the <xref href="whr_publishing_template_contents.dita#template_descritpor_file">template
            descriptor file</xref> associated with your publishing template and add your custom CSS
          in the <term>resources</term> section, for example:
          <codeblock id="codeblock_zs3_zlr_rfc" outputclass="language-xml">&lt;publishing-template>
    ...
    &lt;webhelp>
        &lt;resources>
            &lt;css file="ashes-color.css"/>
            &lt;css file="ashes.css"/>
            ...
        &lt;/resources></codeblock></li>
        <li>Add CSS rules using the custom created variables in the main stylesheet
            (<filepath>ashes.css</filepath> for
          example):<codeblock id="codeblock_xjg_cnr_rfc" outputclass="language-css">body {
  font-family: "PT Sans", sans-serif;
  background-color: var(--wh-primary-bg);
}</codeblock></li>
        <li>Add the parameter in the template
          descriptor:<codeblock outputclass="language-xml" id="codeblock_sdg_t2x_vfc">&lt;publishing-template>
    ...
    &lt;webhelp>
        ...
        &lt;parameters>
            ...
            &lt;parameter name="webhelp.enable.dark.mode" value="yes"/>
        &lt;/parameters></codeblock></li>
        <li>Duplicate the <term>DITA Map WebHelp Responsive</term> transformation scenario.</li>
        <li>Click the <uicontrol>Choose Custom Publishing Template</uicontrol> link and select your
          template.</li>
        <li>Click <uicontrol>OK</uicontrol> to save the changes, then run the transformation
          scenario.</li>
      </ol>
    </section>
    <note id="note_g1t_gq3_rfc" type="restriction">If you open the output locally in <b>Firefox</b>,
      the theme settings may not persist between pages. This happens because Firefox treats each
      local page as a separate origin, preventing shared storage of theme preferences. If you deploy
      the output on an HTTP server or use another browser, theme settings will persist.</note></body>
  <related-links>
    <link href="webhelp-customizing-with-css.dita#whr-browser-inspect"/>
  </related-links>
</topic>
