<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="webhelp-create-dark-mode-ready-publishing-template">
  <title>How to Create a Dark Mode-Ready Publishing Template</title>
  <prolog>
    <metadata>
      <keywords>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>CSS styling</indexterm></indexterm>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>Customizing output with CSS</indexterm></indexterm>
        <indexterm product="author developer editor authorEclipse developerEclipse editorEclipse"
          >WebHelp Responsive <indexterm>Dark mode</indexterm></indexterm>
        <indexterm product="webhelp-responsive ope">CSS styling</indexterm>
        <indexterm product="webhelp-responsive ope">Customizing output with CSS</indexterm>
        <indexterm product="webhelp-responsive ope">Dark mode</indexterm>
      </keywords>
      <keywords>
        <keyword outputclass="label" product="webhelp-responsive">Dark Mode</keyword>
        <keyword outputclass="label" product="webhelp-responsive">CSS Styling</keyword>
      </keywords>
    </metadata>
  </prolog>
  <body>
    <section id="section_snm_ckr_rfc">
      <title>How to Create a Dark Mode-Ready Publishing Template From an Existing One</title>
      <p>By default, two templates supports both light and dark mode: <b>Light</b> and
        <b>Oxygen</b>, the following example uses the <b>Light</b> template:</p>
      <ol id="ol_esr_blr_rfc">
        <li>Copy the existing Publishing Template (see <xref
            href="whr-create-publishing-template.dita#whr-create-publishing-template/creating_a_template_starting_from_an_existing_tem"
          />).</li>
        <li>Edit the <filepath>oxygen-theme.css</filepath> stylesheet with the colors you want to
          add/modify:<codeblock id="codeblock_o1y_qmr_rfc" outputclass="language-css">:root {
  --wh-primary-bg: #e3e3e3;
  ...
  --wh-title-color: #333;
}
:root[data-wh-theme="dark"] {
  color-scheme: dark;
  --wh-primary-bg: #293136;
  ...
  --wh-title-color: #bfbfbf;
}</codeblock></li>
        <li importance="optional">If you added new color variables, add CSS rules using them (in
            <filepath>oxygen.css</filepath> for
          example):<codeblock id="codeblock_xjg_cnr_rfc" outputclass="language-css">*[class ~= "topic/title"] {
  color: var(--wh-title-color);
}</codeblock></li>
        <li>Duplicate the <term>DITA Map WebHelp Responsive</term> transformation scenario.</li>
        <li>Click the <uicontrol>Choose Custom Publishing Template</uicontrol> link and select your
          template.</li>
        <li>Click <uicontrol>OK</uicontrol> to save the changes, then run the transformation
          scenario.</li>
      </ol>
    </section>
    <section id="section_wrm_4jr_rfc">
      <title>How to Create a Dark Mode-Ready Publishing Template From Scratch</title>
      <ol id="steps_bvt_jy5_lfc">
        <li>Create a Publishing Template, see <xref
            href="whr-create-publishing-template.dita#whr-create-publishing-template/creating_a_template_starting_from_scratch"
          />.</li>
        <li>Create a custom CSS stylesheet (<filepath>theme.css</filepath> for example) and
          add the light colors:<note id="note_it1_4fp_xfc">Built-in CSS rules will automatically use
            the variables defined here and in the next
          step.</note><codeblock id="codeblock_e2g_kdv_lfc" outputclass="language-css">:root {
  /* General */
  --wh-primary-bg: #fff;
  --wh-primary-color: #000;
  --wh-secondary-bg: #000;
  --wh-secondary-color: #fff;
  --wh-strong-color: #888;
  --wh-soft-color: #ccc;
  --wh-subtle-color: #f2f2f2;

  --wh-top-menu-bg: #e6e6e6;
  --wh-main-page-toc-bg: #f2f8ff;
  --wh-main-page-toc-border: #c0c0c0;
  --wh-main-page-shortdesc-color: #0d1a2b;
  --wh-close-toc-icon-border: #343a40;
  --wh-close-toc-button-shadow: rgba(0,0,0,.16);

  --wh-link-color: #337ab7;
  --wh-label-color: #666;
  --wh-pre-bg: #eee;
  --wh-tooltip-color: #5185cb;
  --wh-code-color: #800000;
  --wh-boolean-color: #008000;
  --wh-state-color: #ff0000;
  --wh-syntaxdiagram-color: #800000;
  --wh-markup-color: #639;
  --wh-fig-border: #c0c0c0;
  --wh-caution-bg: #ffd100;
  --wh-danger-bg: #c8102e;
  --wh-warning-bg: #ff8200;
  --wh-hazardstatement-bg: #0072ce;
  --wh-indexterm-bg: #fdf;
  --wh-go2top-bg: #444;
  --wh-go2top-border: #999;
  --wh-toggle-border: #347bb7;

  /* Search */
  --wh-search-color: #c93416;
  --wh-search-breadcrumb-color: #ccc;
  --wh-search-loader-base-bg: #eaecec;
  --wh-search-loader-glow-bg: #f3f3f3;
  --wh-search-facets-bg: #e3ebf3;
  --wh-search-facets-disabled-color: #b7b6b6;
  --wh-search-facets-border: #ebebeb;
  --wh-search-results-facets-bg: #f5f5f5;
  --wh-search-results-facets-color: #212c37;
  --wh-highlight-bg: #ffff88;
  --wh-scroll-bg: #d6d6d6;

  /* Change Tracking */
  --wh-oxy-delete-color: #ff0000;
  --wh-oxy-insert-color: #0000ff;
  --wh-oxy-change-done-color: #808080;
  --wh-oxy-range-color: #800000;
  --wh-oxy-comment-border: #ffa500;
  --wh-oxy-change-bg: #ffff00;
  --wh-oxy-attributes-footnote-bg: #00ffff;
  --wh-oxy-comment-footnote-bg: #ffffaa;
  --wh-oxy-delete-footnote-bg: #ffaaaa;
  --wh-oxy-insert-footnote-bg: #ddddff;

  /* Syntax Highlight */
  --wh-hl-json_key-color: #7263b9;
  --wh-hl-keyword-color: #7f0055;
  --wh-hl-string-color: #2a00ff;
  --wh-hl-comment-color: #006400;
  --wh-hl-directive-color: #8b26c9;
  --wh-hl-tag-color: #000096;
  --wh-hl-attribute-color: #ff7935;
  --wh-hl-value-color: #993300;
  --wh-hl-html-color: #000080;
  --wh-hl-xsl-color: #0066ff;
  --wh-hl-annotation-color: #808080;
  --wh-hl-tag-doctype-comment-color: #3f5fbf;
  --wh-hl-tag-doctype-color: #0000ff;

  /* OpenAPI */
  --wh-openapi-border: #c5c5c5;
  --wh-openapi-post-bg: #c2f2cb;
  --wh-openapi-get-bg: #ccebff;
  --wh-openapi-delete-bg: #ffceca;
  --wh-openapi-put-bg: #ffe7c7;
  --wh-openapi-head-bg: #f4e6ff;
}</codeblock></li>
        <li>In the same stylesheet, add the dark colors:<note id="note_rwx_sxn_xfc">If you are using
            the same color in both light and dark modes, you only need to define it for the light
            mode.</note><codeblock id="codeblock_lnz_b2p_xfc" outputclass="language-css">:root[data-wh-theme="dark"] {
  color-scheme: dark;
  /* General */
  --wh-primary-bg: #212529;
  --wh-primary-color: #e3e3e3;
  --wh-secondary-bg: #212529;
  --wh-secondary-color: #e3e3e3;
  --wh-strong-color: #e0e0e0;
  --wh-subtle-color: #3a3b3c;

  --wh-top-menu-bg: #2b3035;
  --wh-main-page-toc-bg: #22303c;
  --wh-main-page-shortdesc-color: #d5d5d5;
  --wh-close-toc-icon-border: var(--wh-primary-color);
  --wh-close-toc-button-shadow: rgba(255,255,255,.16);

  --wh-link-color: #76a5e0;
  --wh-label-color: #bbb;
  --wh-pre-bg: #444;
  --wh-code-color: #ffa500;
  --wh-boolean-color: #66ff66;
  --wh-state-color: #ff6666;
  --wh-syntaxdiagram-color: #ff4d4d;
  --wh-markup-color: #d1b3ff;
  --wh-caution-bg: #998400;
  --wh-danger-bg: #62002b;
  --wh-warning-bg: #993500;
  --wh-hazardstatement-bg: #0025cb;

  /* Search */
  --wh-search-color: #a2311a;
  --wh-search-breadcrumb-color: #555555;
  --wh-search-loader-base-bg: #3a3f44;
  --wh-search-loader-glow-bg: #4b525a;
  --wh-search-facets-bg: #2d333b;
  --wh-search-facets-disabled-color: var(--wh-label-color);
  --wh-search-facets-border: #444;
  --wh-search-results-facets-bg: #2c2f35;
  --wh-search-results-facets-color: #d8dee9;
  --wh-highlight-bg: #777700;
  --wh-scroll-bg: #444;

  /* Change Tracking */
  --wh-oxy-delete-color: #ff6b6b;
  --wh-oxy-insert-color: #66aaff;
  --wh-oxy-change-done-color: #ccc;
  --wh-oxy-range-color: #ff4d4d;
  --wh-oxy-comment-border: #995f00;
  --wh-oxy-change-bg: #666600;
  --wh-oxy-attributes-footnote-bg: #006666;
  --wh-oxy-comment-footnote-bg: #666633;
  --wh-oxy-delete-footnote-bg: #994d4d;
  --wh-oxy-insert-footnote-bg: #666699;

  /* Syntax Highlight */
  --wh-hl-json_key-color: #b5adda;
  --wh-hl-keyword-color: #ff89d8;
  --wh-hl-string-color: #b7a8ff;
  --wh-hl-comment-color: #00cf00;
  --wh-hl-directive-color: #d0a0ed;
  --wh-hl-tag-color: #aaaaff;
  --wh-hl-attribute-color: #ff9763;
  --wh-hl-value-color: #ff9661;
  --wh-hl-html-color: #a9a9ff;
  --wh-hl-xsl-color: #80b2ff;
  --wh-hl-annotation-color: #b0b0b0;
  --wh-hl-tag-doctype-comment-color: #a2b2e0;
  --wh-hl-tag-doctype-color: #a8a8ff;

  /* OpenAPI */
  --wh-openapi-border: #8a8a8a;
  --wh-openapi-post-bg: #7eae7a;
  --wh-openapi-get-bg: #7a9fcf;
  --wh-openapi-delete-bg: #b2746e;
  --wh-openapi-put-bg: #bfae86;
  --wh-openapi-head-bg: #7a70b2;
}</codeblock></li>
        <li importance="optional">Add custom variables for elements that require two color or image
          variants, such as:<codeblock id="codeblock_xl4_xz5_lfc" outputclass="language-css">:root {
  ...
  --wh-breadcrumb-color: #878787;
  --wh-related-links-color: #5185cb;
  --wh-publication-toc-color: #7b7a7a;

  --wh-search-image: url("resources/images/custom.png");
}

:root[data-wh-theme="dark"] {
  color-scheme: dark;
  ...
  --wh-breadcrumb-color: #6ab1e3;
  --wh-related-links-color: #0d6efd;
  --wh-publication-toc-color: var(--wh-breadcrumb-color);

  --wh-search-image: url("resources/images/custom_dark.png");
}</codeblock>If you added new color variables, add CSS rules using them (in
            <filepath>custom.css</filepath> for
          example):<codeblock id="codeblock_n2t_dfp_xfc" outputclass="language-css">.wh_breadcrumb ol{
  color: var(--wh-breadcrumb-color);
}
.related-links a,
.related-links a:visited {
  color: var(--wh-related-links-color);
  padding-bottom: .3em;
}
.wh_publication_toc a,
.wh_publication_toc a:visited,
.wh_publication_toc a:hover {
  color: var(--wh-publication-toc-color);
}
.wh_search_input{
  padding: 115px 0;
  background: var(--wh-search-image) right no-repeat var(--wh-search-input-bg);
}</codeblock></li>
        <li>Open the <xref href="whr_publishing_template_contents.dita#template_descritpor_file"
            >template descriptor file</xref> associated with your publishing template, add your
          custom CSS stylesheets in the <xmlelement>resources</xmlelement> section and declare the
          parameter in the <xmlelement>parameters</xmlelement>
          section:<codeblock id="codeblock_cmf_zdq_rfc" outputclass="language-xml">&lt;publishing-template>
  ...
  &lt;webhelp>
    ...
    &lt;resources>
      &lt;css file="theme.css"/>
      &lt;css file="custom.css"/>
    &lt;/resources>
    &lt;parameters>
      ...
      &lt;parameter name="webhelp.enable.dark.mode" value="yes"/>
    &lt;/parameters>
    ...</codeblock></li>
        <li>Duplicate the <term>DITA Map WebHelp Responsive</term> transformation scenario.</li>
        <li>Click the <uicontrol>Choose Custom Publishing Template</uicontrol> link and select your
          template.</li>
        <li>Click <uicontrol>OK</uicontrol> to save the changes, then run the transformation
          scenario.</li>
      </ol>
    </section>
    <note id="note_g1t_gq3_rfc" type="restriction">If you open the output locally in <b>Firefox</b>,
      the theme settings may not persist between pages. This happens because Firefox treats each
      local page as a separate origin, preventing shared storage of theme preferences. If you deploy
      the output on an HTTP server or use another browser, theme settings will persist.</note></body>
  <related-links>
    <link href="webhelp-customizing-with-css.dita#whr-browser-inspect"/>
  </related-links>
</topic>
