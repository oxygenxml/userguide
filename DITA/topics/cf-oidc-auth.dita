<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="cf-oidc-auth">
  <title>Single Sign-On in Content Fusion Enterprise</title>
  <prolog>
    <metadata>
      <keywords>
        <indexterm>OpenID Connect authentication</indexterm>
        <indexterm>Microsoft Entra ID</indexterm>
        <indexterm>Okta</indexterm>
      </keywords>
    </metadata>
  </prolog>
  <body>
    <p id="p_yk5_dgk_54b"><ph keyref="cfEnterprise"/> supports Single Sign-On by configuring a
      provider that supports the <b>OpenID Connect</b> protocol such as Microsoft Entra ID or Okta. </p>
    <note id="note_tdv_1sf_h1c">Content Fusion uses the email address provided by the Single Sign-On
      provider, unless the <codeph>email_verified</codeph> field is <codeph>false</codeph> for a
      particular user. </note>
    <p>To enable Single Sign-On:<ol id="ul_q5l_zsv_m2b">
        <li id="li_zk5_dgk_54b">Define a new application in the administration interface of your
          OpenID Connect provider to represent your <ph keyref="cfEnterprise"/> deployment:<ol
            id="ol_xwl_cw1_h1c">
            <li>When you are asked for a redirect URI, use the following value:
                <codeph>https://&lt;content-fusion-address>/api/oauthc/oidcId/callback</codeph>
              where you replace <codeph>&lt;content-fusion-address></codeph> with the actual address
              of your server.</li>
            <li>After you define the application, you need to note the <b>Client ID</b> (or
                <b>Application ID</b> in some cases) and <b>Client Secret</b> that will be generated
              for you.</li>
          </ol></li>
        <li id="li_cyd_w2k_4fc">On the machine where Content Fusion is installed, go to the <xref
            href="cf-enterprise-configuration.dita">Administration Page</xref>. In the
            <uicontrol>Single Sign-On Authentication</uicontrol> section, enable the <uicontrol>Use
            OIDC single sign-on</uicontrol> option and configure the fields listed there.<p
            id="p_dyd_w2k_4fc">For Okta:<ul id="ul_eyd_w2k_4fc">
              <li id="li_fyd_w2k_4fc"><uicontrol>Provider Name</uicontrol> - Enter <i>OKTA</i>.</li>
              <li id="li_gyd_w2k_4fc">To retrieve the <b>authorization</b>, <b>token</b>, and
                  <b>user info</b> endpoints, append
                  <codeph>/.well-known/openid-configuration</codeph> to the <b>Issuer URI</b> of
                your <b>Authorization Server</b>. You can find the <b>Issuer URI</b> in <menucascade>
                  <uicontrol>Okta Admin Console</uicontrol>
                  <uicontrol>Security</uicontrol>
                  <uicontrol>API</uicontrol>
                  <uicontrol>Authorization Servers</uicontrol>
                </menucascade>.<p id="p_hyd_w2k_4fc">For example, your discovery URL might look
                  like:<codeblock outputclass="language-bourne">https://&amp;lt;okta-subdomain>.okta.com/oauth2/&amp;lt;authorizationServerId>/.well-known/openid-configuration</codeblock></p><p
                  id="p_iyd_w2k_4fc">where you must replace <codeph>&lt;okta-subdomain></codeph>with
                  your Okta domain, and <codeph>&lt;authorizationServerId></codeph> with the actual
                  ID of your <b>Authorization Server</b>.</p></li>
              <li id="li_jyd_w2k_4fc"><uicontrol>Client ID</uicontrol> - Enter the <b>Client ID</b>
                (or <b>Application ID</b> in some cases) that was generated in step one.</li>
              <li id="li_kyd_w2k_4fc"><uicontrol>Client Secret</uicontrol> - Enter the <b>Client
                  Secret</b> that was generated in step one.</li>
            </ul></p><p id="p_lyd_w2k_4fc">For Entra ID:</p><ul id="ul_myd_w2k_4fc">
            <li id="li_nyd_w2k_4fc"><uicontrol>Provider Name</uicontrol> - Enter
              <i>EntraID</i>.</li>
            <li id="li_oyd_w2k_4fc">To retrieve the <b>authorization</b>, <b>token</b>, and <b>user
                info</b> endpoints, use:
                <codeph>https://login.microsoftonline.com/&lt;tenant-id>/v2.0/.well-known/openid-configuration</codeph>,
              where you must replace <codeph>&lt;tenant-id></codeph> with the <b>Directory (tenant)
                ID</b> from your registered application's overview in Azure Portal.</li>
            <li id="li_pyd_w2k_4fc"><uicontrol>Client ID</uicontrol> - Enter the <b>Client ID</b>
              (or <b>Application ID</b> in some cases) that was generated in step one.</li>
            <li id="li_qyd_w2k_4fc"><uicontrol>Client Secret</uicontrol> - Enter the <b>Client
                Secret</b> that was generated in step one.</li>
          </ul></li>
        <li id="li_vbt_fkb_n2c">Make sure you click <uicontrol>Save Configuration</uicontrol> when
          you are finished.</li>
        <li id="li_il5_dgk_54b">Restart the Content Fusion
          machine.<codeblock outputclass="language-bourne" id="codeblock_jl5_dgk_54b">sudo bash /fusion/admin/stop-content-fusion.sh
sudo bash /fusion/admin/start-content-fusion.sh</codeblock></li>
      </ol></p>
    <p id="p_kl5_dgk_54b"><b>Result:</b> Users will now have the option to log on to Content Fusion
      using the OpenID Connect provider.</p>
  </body>
  <related-links>
      <link href="cf-google-auth.dita"/>
      <link href="cf-github-auth.dita"/>
  </related-links>
</topic>
