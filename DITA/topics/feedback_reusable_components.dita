<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="feedback_reusable_components">
  <title>Reusable Components in Oxygen Feedback Chapter</title>
  <body><!--Reusables for Feedback-->
    <p id="installation-options">
      <dl>
        <dlentry>
          <dt><uicontrol>Oxygen XML Editor/Author</uicontrol></dt>
          <dd>Choose this option if you are adding the Feedback system to WebHelp Responsive
            documentation AND you will generate the documentation using a transformation scenario in
              <b>Oxygen XML Editor/Author</b>.</dd>
        </dlentry>
        <dlentry>
          <dt><uicontrol>Command-Line Script</uicontrol></dt>
          <dd>Choose this option if you are adding the Feedback system to WebHelp Responsive
            documentation AND you will generate the documentation using a command-line script.</dd>
        </dlentry>
        <dlentry>
          <dt><uicontrol>Any Platform</uicontrol></dt>
          <dd>Choose this option if you are adding the Feedback system to a website. When you select
            this option, an HTML fragment will be displayed. You need to copy this fragment and
            paste it into your HTML code for each webpage that you want to have the Feedback system
            embedded.</dd>
        </dlentry>
      </dl>
    </p>
    <p id="statistics-filters-p">
      <dl>
        <dlentry id="metrics">
          <dt>Metrics</dt>
          <dd>You can select the type of metric to be displayed. You can choose between
              <uicontrol>Page views</uicontrol>, <uicontrol>Comments</uicontrol>, or both.</dd>
        </dlentry>
        <dlentry id="sites">
          <dt>Sites</dt>
          <dd>
            <p>You can choose which site configurations to have their statistics displayed.</p>
          </dd>
        </dlentry>
        <dlentry id="date-chooser">
          <dt>Date Chooser</dt>
          <dd>You can select the time period to be displayed. You can choose a relative period
            (current month, last week, last month, last 3 months, last 6 months, and last year) or
            you can select a custom period. The default time period is automatically selected based
            upon the amount of data that is found in each month.</dd>
        </dlentry>
        <dlentry id="aggregate-chooser">
          <dt>Aggregate Chooser</dt>
          <dd>You can choose between <uicontrol>Daily</uicontrol> or <uicontrol>Monthly</uicontrol>
            for the type of aggregation to be displayed.</dd>
        </dlentry>
        <dlentry id="chart-type-chooser">
          <dt>Chart Type Chooser</dt>
          <dd>
            <p>You can select the type of the chart to be displayed. You can choose between
                <uicontrol>Line</uicontrol>, <uicontrol>Bar</uicontrol>, and
                <uicontrol>Stack</uicontrol>.</p>
          </dd>
        </dlentry>
      </dl>
    </p>
    <!--Installation prereqs-->
    <ul id="ul_cbv_d3x_fjb">
      <li id="prereq1">You must have an installed version of <b>Oxygen XML Editor</b> or <b>Oxygen
          XML Author</b> with a valid license. </li>
      <li id="prereq2">To install and manage <ph keyref="product"/>, you will need to choose a
        subscription plan during the installation procedure. To see the subscription plans prior to
        installing the product, go to: <xref
          href="https://www.oxygenxml.com/oxygen_feedback/buy_feedback.html" format="html"
          scope="external"/>.<note type="notice" id="subscription-notice">If your subscription
          expires or if the number of page views allowed by your plan is exceeded for a particular
          month, you will receive a notification and the comments component will be disabled until
          the subscription is renewed/upgraded or until the end of the month (in the case of
          exceeding the page views limit).</note></li>
    </ul>
    <note id="note-replied-threads">If a new reply is added to a thread that is marked as
        <i>Resolved</i>, the thread is automatically marked as <i>Open</i>.</note>
    <!--Installation ol-->
    <ol id="ol_pwy_sjx_fjb">
      <li id="li1">Log in to your Feedback account from the <i>login page</i> (<xref
          href="https://feedback.oxygenxml.com/login" format="html" scope="external"/>). You can
        click on <uicontrol>Log in with Google</uicontrol> or <uicontrol>Log in with
          Facebook</uicontrol> to create an account using your Google or Facebook credentials or
        click the <uicontrol>Sign Up</uicontrol> tab to create an account using your name and email
            address.<p><b>Step Result:</b> If this is your first time logging in and you have not
          yet created a site configuration, you are directed to a Welcome page. Otherwise, you are
          directed to the <uicontrol>Dashboard</uicontrol> page.</p></li>
      <li id="li2">Click the <uicontrol>Add your first site</uicontrol> button to <xref
          href="ofb-creating-site.dita">create a site configuration</xref><ph product="feedback">
          (if you are on the <uicontrol>Dashboard</uicontrol> page, click the <uicontrol>Add
            site</uicontrol> link in the top-right corner of the <xref
            href="ofb-dashboard.dita#ofb-dashboard/sites-pane"><uicontrol>Sites</uicontrol>
            pane</xref>)</ph>.<ph product="feedback"> If you have not already selected a
          subscription plan, you will be directed to a page where you can choose from several
          options (you will also have the opportunity to choose the types of notifications you want
          to receive).</ph></li>
      <li id="li3">In the <uicontrol>Settings</uicontrol> page, enter a <uicontrol>Name</uicontrol>
        and <uicontrol>Description</uicontrol> for the site configuration. Some optional settings
        can be adjusted according to your needs. For more details, see the <xref
          href="ofb-site-settings-page.dita"/> topic. Click <uicontrol>Continue</uicontrol>.</li>
      <li id="li4">
        <p>In the <uicontrol>Version</uicontrol> page, you must specify a version and the base URL
          from your website where the WebHelp output is deployed. The <uicontrol>Name</uicontrol>
          field is where you specify the version name or identifier. This is helpful if there will
          be multiple versions for your output. For example, if your published output is
          documentation for a product that has multiple released versions, each version probably has
          its own published documentation. In this case, each published version requires a different
          configuration since the version and base URL would be different for each of them.</p>
        <p>The <uicontrol>Site base URL</uicontrol> field is where you specify the base URL for the
          website where you publish your output. For WebHelp output, for example, it is the URL
          where your WebHelp output is deployed. Comments will only be displayed on pages within the
          hierarchy of the specified base URL. For more details, see the <xref
            href="ofb-site-initial-version.dita"/> topic. Click <uicontrol>Continue</uicontrol>.</p>
      </li>
      <li id="li-run-transformation">
        <p>Run the transformation and deploy the WebHelp output to a web server.</p>
      </li>
    </ol>
    <!--Database setup for MySQL-->
    <p id="MySQL">To connect <ph keyref="product"/> to the MySQL database, follow these steps: <ol
        id="ol_j3k_zbl_dmb">
        <li>Create a database user that will be used by <ph keyref="product"/> to connect to the
          database. For example,
            <filepath>feedback_db_user</filepath>:<codeblock outputclass="language-bourne">CREATE USER 'feedback_db_user'@'localhost' IDENTIFIED BY 'password';</codeblock><p>This
            creates a user that can connect from the localhost. For more details, see: <xref
              href="https://dev.mysql.com/doc/refman/8.0/en/create-user.html" format="html"
              scope="external"/>. </p></li>
        <li>Create the database where <ph keyref="product"/> will store its data. For example,
            <filepath>feedback_db</filepath>:
            <codeblock outputclass="language-bourne">CREATE DATABASE feedback_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</codeblock><p>The
            database must have a character set of UTF8. For more details, see: <xref
              href="https://dev.mysql.com/doc/refman/8.0/en/create-database.html" format="html"
              scope="external"/>. </p></li>
        <li>The user needs to have permission to connect to the database, create and populate the
          tables, etc. You can provide these permissions with the following command:
            <codeblock outputclass="language-bourne">GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, 
CREATE VIEW, EVENT, TRIGGER, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EXECUTE ON feedback_db.* 
TO 'feedback_db_user'@'localhost';
flush privileges;</codeblock><p>For more details, see: <xref
              href="https://dev.mysql.com/doc/refman/8.0/en/grant.html" format="html"
              scope="external"/>.</p></li>
        <li>Copy the MySQL JDBC driver: <ol id="ol_dqg_cgl_dmb">
            <li>Go to <xref href="https://dev.mysql.com/downloads/connector/j/8.0.html"
                format="html" scope="external"/>.</li>
            <li>For <uicontrol>Select Operating System</uicontrol>, chooses <filepath>Platform
                Independent</filepath>.</li>
            <li>Download the connector.</li>
            <li>Extract the contents from the downloaded MySQL connector JAR file to the
              installation directory. For example:
                <codeblock outputclass="language-bourne">$OXYGEN_FEEDBACK_INSTALL_DIR/oxygen-feedback-1.3/lib </codeblock><note>Only
                the <b>MySQL connector JAR file</b> should be copied to the directory mentioned
                above, and not the entire archive content.</note></li>
          </ol></li>
        <li>Configure <ph keyref="product"/> to connect to the database:<ol id="ol_lls_1hl_dmb">
            <li>Go to <codeph>/config</codeph> and create a file named
                <filepath>feedback-database.properties</filepath>. </li>
            <li>Edit the file and update it with your configuration. An example is provided in the
                <filepath>feedback-database-mysql.properties</filepath> file. It should look like
              this:
              <codeblock outputclass="language-bourne"># The database management system type. For example MySQL or PostgreSQL.
feedback.database.type = mysql
# The database URL in format: jdbc:mysql://&lt;hostname>:&lt;port>/&lt;database>
# For example: jdbc:mysql://localhost:3306/feedback_db
feedback.datasource.url=jdbc:mysql://localhost:3306/feedback_db
# The username to access the database
feedback.datasource.username=feedback_db_user
# The password to access the database
feedback.datasource.password=password</codeblock></li>
          </ol></li>
      </ol></p>
    <!--Database setup for PostgreSQL-->
    <p id="PostgreSQL">To connect <ph keyref="product"/> to the PostgreSQL database, follow these
        steps:<ol id="ol_klb_yvp_2mb">
        <li>Create a database user that will be used by <ph keyref="product"/> to connect to the
          database. For example,
            <filepath>feedback_db_user</filepath>:<codeblock outputclass="language-bourne">CREATE USER feedback_db_user WITH PASSWORD 'password';</codeblock><p>For
            more details, see: <xref href="https://www.postgresql.org/docs/12/sql-createuser.html"
              format="html" scope="external"/>.</p></li>
        <li>Create the database where <ph keyref="product"/> will store its data. For example,
            <filepath>feedback_db</filepath>:
            <codeblock outputclass="language-bourne">CREATE DATABASE feedback_db ENCODING='UTF8' LC_COLLATE='C' LC_CTYPE='C' TEMPLATE='template0';</codeblock><p>The
            database must have the encoding set of UTF8. For more details, see: <xref
              href="https://www.postgresql.org/docs/12/sql-createdatabase.html" format="html"
              scope="external"/>.</p></li>
        <li>The user needs to have permission to connect to the database, create and populate the
          tables, etc. You can provide these permissions with the following command:
            <codeblock outputclass="language-bourne">GRANT ALL PRIVILEGES ON DATABASE feedback_db TO feedback_db_user;</codeblock><p>For
            more details, see: <xref href="https://www.postgresql.org/docs/12/sql-grant.html"
              format="html" scope="external"/>.</p></li>
        <li>Configure <ph keyref="product"/> to connect to the database: <ol id="ol_olb_yvp_2mb">
            <li>Go to <codeph>/config</codeph> and create a file named
                <filepath>feedback-database.properties</filepath>.</li>
            <li>Edit the file and update it with your configuration. An example is provided in the
                <filepath>feedback-database-psql.properties</filepath> file. It should look like
              this:<codeblock outputclass="language-bourne"># The database management system type. For example MySQL or PostgreSQL.
feedback.database.type = postgresql
# The database URL in format: jdbc:postgresql://&lt;hostname>:&lt;port>/&lt;database>
# For example: jdbc:postgresql://localhost:5432/feedback_db
feedback.datasource.url=jdbc:postgresql://localhost:5432/feedback_db
# The username to access the database
feedback.datasource.username=feedback_db_user
# The password to access the database
feedback.datasource.password=password</codeblock></li>
          </ol></li>
      </ol></p>
    <!--Site base URL note-->
    <note type="warning" id="site-base-url-note">The comments component will only appear on pages
      within the hierarchy of this base URL. For example, <filepath>https://example.com/a</filepath>
      <b>IS</b> a base URL for <filepath>https://example.com/a/b</filepath>, while it <b>IS NOT</b>
      a base URL for <filepath>https://example.com/abc</filepath>.</note></body>
</topic>
