<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="feedback_reusable_components">
  <title>Reusable Components in Oxygen Feedback Chapter</title>
  <body><!--Reusables for Feedback-->
    <p id="installation-options">
      <dl id="dl_wjl_bgk_54b">
        <dlentry id="dlentry_xjl_bgk_54b">
          <dt><uicontrol>Oxygen XML Editor/Author</uicontrol></dt>
          <dd>Choose this option if you are adding the Feedback system to WebHelp Responsive
            documentation AND you will generate the documentation using a transformation scenario in
            <b>Oxygen XML Editor/Author</b>.</dd>
        </dlentry>
        <dlentry id="dlentry_yjl_bgk_54b">
          <dt><uicontrol>Command-Line Script</uicontrol></dt>
          <dd>Choose this option if you are adding the Feedback system to WebHelp Responsive
            documentation AND you will generate the documentation using a command-line script.</dd>
        </dlentry>
        <dlentry id="dlentry_zjl_bgk_54b">
          <dt><uicontrol>Any Platform</uicontrol></dt>
          <dd>Choose this option if you are adding the Feedback system to a website. When you select
            this option, an HTML fragment will be displayed. You need to copy this fragment and
            paste it into your HTML code for each webpage that you want to have the Feedback system
            embedded.</dd>
        </dlentry>
      </dl>
    </p>
    <p id="statistics-filters-p">
      <dl id="dl_akl_bgk_54b">
        <dlentry id="metrics">
          <dt>Metrics</dt>
          <dd>You can select the type of metric to be displayed. You can choose between
              <uicontrol>Page views</uicontrol>, <uicontrol>Comments</uicontrol>, <uicontrol>AI
              Assistant Sessions</uicontrol>, <uicontrol>AI Assistant Users</uicontrol>,
              <uicontrol>AI Assistant Threads</uicontrol>, and <uicontrol>AI Assistant Search
              Summaries</uicontrol>.</dd>
        </dlentry>
        <dlentry id="sites">
          <dt>Sites</dt>
          <dd>
            <p id="p_bkl_bgk_54b">You can choose which site configurations to have their statistics displayed.</p>
          </dd>
        </dlentry>
        <dlentry id="date-chooser">
          <dt>Date Chooser</dt>
          <dd>You can select the time period to be displayed. You can choose a relative period
            (current month, last week, last month, last 3 months, last 6 months, and last year) or
            you can select a custom period. The default time period is automatically selected based
            upon the amount of data that is found in past intervals of 2, 5, or 11 months (plus the
            amount of past days in the current month). For example, if there is data found only in
            the last 2 months, the default selected time period encompasses all the past days in the
            current month plus the entire 2 months prior to the current month. If there is data
            found in the past 11 months, then the default encompasses all the past days in the
            current month plus the entire 11 months prior.</dd>
        </dlentry>
        <dlentry id="aggregate-chooser">
          <dt>Aggregate Chooser</dt>
          <dd>You can choose between <uicontrol>Daily</uicontrol> or <uicontrol>Monthly</uicontrol>
            for the type of aggregation to be displayed.</dd>
        </dlentry>
        <dlentry id="chart-type-chooser">
          <dt>Chart Type Chooser</dt>
          <dd>
            <p id="p_ckl_bgk_54b">You can select the type of the chart to be displayed. You can choose between
              <uicontrol>Line</uicontrol>, <uicontrol>Bar</uicontrol>, and
              <uicontrol>Stack</uicontrol>.</p>
          </dd>
        </dlentry>
      </dl>
    </p>
    <!--Installation prereqs-->
    <ul id="ul_cbv_d3x_fjb">
      <li id="li_grq_prs_prb">You must <xref href="ofb-signing-up.dita">create an account to access
            <uicontrol>Oxygen Feedback</uicontrol></xref>.</li>
      <li id="prereq2">To install and manage <ph keyref="product"/>, you will need to choose a
        subscription plan during the installation procedure. To see the subscription plans prior to
        installing the product, go to: <xref
          href="https://www.oxygenxml.com/oxygen_feedback/buy_feedback.html" format="html"
          scope="external"/>.<note type="notice" id="subscription-notice">If your subscription
          expires or if the number of page views allowed by your plan is exceeded for a particular
          month, you will receive a notification and the comments component will be disabled until
          the subscription is renewed/upgraded or until the end of the month (in the case of
          exceeding the page views limit). If an expired subscription is not renewed, the comments
          are still visible for a limited period of time (e.g. 2 weeks). After that, they will no
          longer be displayed.</note></li>
    </ul>
    <note id="note-replied-threads">If a new reply is added to a thread that is marked as
        <i>Resolved</i>, the thread is automatically marked as <i>Reopened</i>.</note>
    <!--Installation ol-->
    <ol id="ol_pwy_sjx_fjb">
      <li id="li1">Log in to your Feedback account from the <i>login page</i> (<xref
          href="https://feedback.oxygenxml.com/login" format="html" scope="external"/>). You can
        click on <uicontrol>Log in with Google</uicontrol> or <uicontrol>Log in with
          Facebook</uicontrol> to create an account using your Google or Facebook credentials or
        click the <uicontrol>Sign Up</uicontrol> tab to create an account using your name and email
          address.<p id="p_dkl_bgk_54b"><b>Step Result:</b> You are directed to the <xref
            href="ofb-dashboard.dita"><uicontrol>Dashboard</uicontrol> page.</xref></p></li>
      <li id="li2">Click the <uicontrol>Create first site</uicontrol> button in the <uicontrol>Get
          Started</uicontrol> pane to <xref href="ofb-creating-site.dita">create a site
          configuration</xref> (or click the <uicontrol>Add site</uicontrol> link in the top-right
        corner of the <uicontrol>Sites</uicontrol> pane or go to the <xref
          href="ofb-sites-page.dita"><uicontrol>Sites</uicontrol> page</xref> and click the
          <uicontrol>Add site</uicontrol> button).</li>
      <li id="li3">In the <uicontrol>Settings</uicontrol> page, enter a <uicontrol>Name</uicontrol>
        and <uicontrol>Description</uicontrol> for the site configuration. Some optional settings
        can be adjusted according to your needs. For more details, see the <xref
          href="ofb-site-settings-page.dita"/> topic. Click <uicontrol>Continue</uicontrol>.</li>
      <li id="li4">
        <p id="p_ekl_bgk_54b">In the <uicontrol>Version</uicontrol> page, you must specify a version and the base URL
          from your website where the WebHelp output is deployed. The <uicontrol>Name</uicontrol>
          field is where you specify the version name or identifier. This is helpful if there will
          be multiple versions for your output. For example, if your published output is
          documentation for a product that has multiple released versions, each version probably has
          its own published documentation. In this case, each published version requires a different
          configuration since the version and base URL would be different for each of them.</p>
        <p id="p_fkl_bgk_54b">The <uicontrol>Base URL</uicontrol> field is where you specify the
          base URL for the website where you publish your output. For WebHelp output, for example,
          it is the URL where your WebHelp output is deployed. Comments will only be displayed on
          pages within the hierarchy of the specified base URL. For more details, see the <xref
            href="ofb-site-initial-version.dita"/> topic. Click <uicontrol>Continue</uicontrol>.</p>
      </li>
      <li id="li-run-transformation">
        <p id="p_gkl_bgk_54b">Run the transformation and deploy the WebHelp output to a web server.</p>
      </li>
    </ol>
    <!--Database setup for MySQL-->
    <p id="MySQL">To connect <ph keyref="product"/> to the MySQL database, follow these steps: <ol
      id="ol_j3k_zbl_dmb">
      <li id="li_hkl_bgk_54b">Create a database user that will be used by <ph keyref="product"/> to connect to the
        database. For example,
        <filepath>feedback_db_user</filepath>:<codeblock outputclass="language-bourne" id="codeblock_ikl_bgk_54b">CREATE USER 'feedback_db_user'@'localhost' IDENTIFIED BY 'password';</codeblock><p id="p_jkl_bgk_54b">This
          creates a user that can connect from the localhost. For more details, see: <xref
            href="https://dev.mysql.com/doc/refman/8.0/en/create-user.html" format="html"
            scope="external"/>. </p></li>
      <li id="li_kkl_bgk_54b">Create the database where <ph keyref="product"/> will store its data. For example,
        <filepath>feedback_db</filepath>:
        <codeblock outputclass="language-bourne" id="codeblock_lkl_bgk_54b">CREATE DATABASE feedback_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</codeblock><p id="p_mkl_bgk_54b">The
          database must have a character set of UTF8. For more details, see: <xref
            href="https://dev.mysql.com/doc/refman/8.0/en/create-database.html" format="html"
            scope="external"/>. </p></li>
      <li id="li_nkl_bgk_54b">The user needs to have permission to connect to the database, create and populate the
        tables, etc. You can provide these permissions with the following command:
        <codeblock outputclass="language-bourne" id="codeblock_okl_bgk_54b">GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, 
CREATE VIEW, EVENT, TRIGGER, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EXECUTE ON feedback_db.* 
TO 'feedback_db_user'@'localhost';
flush privileges;</codeblock><p id="p_pkl_bgk_54b">For more details, see: <xref
  href="https://dev.mysql.com/doc/refman/8.0/en/grant.html" format="html"
  scope="external"/>.</p></li>
      <li id="li_qkl_bgk_54b">Copy the MySQL JDBC driver: <ol id="ol_dqg_cgl_dmb">
        <li id="li_rkl_bgk_54b">Go to <xref href="https://dev.mysql.com/downloads/connector/j/8.0.html"
          format="html" scope="external"/>.</li>
        <li id="li_skl_bgk_54b">For <uicontrol>Select Operating System</uicontrol>, chooses <filepath>Platform
          Independent</filepath>.</li>
        <li id="li_tkl_bgk_54b">Download the connector.</li>
        <li id="li_ukl_bgk_54b">Extract the contents from the downloaded MySQL connector JAR file to the
          installation directory. For example:
          <codeblock outputclass="language-bourne" id="codeblock_vkl_bgk_54b">$OXYGEN_FEEDBACK_INSTALL_DIR/oxygen-feedback-1.3/lib </codeblock><note id="note_wkl_bgk_54b">Only
            the <b>MySQL connector JAR file</b> should be copied to the directory mentioned
            above, and not the entire archive content.</note></li>
      </ol></li>
      <li id="li_xkl_bgk_54b">Configure <ph keyref="product"/> to connect to the database:<ol id="ol_lls_1hl_dmb">
        <li id="li_ykl_bgk_54b">Go to <codeph>/config</codeph> and create a file named
          <filepath>feedback-database.properties</filepath>. </li>
        <li id="li_zkl_bgk_54b">Edit the file and update it with your configuration. An example is provided in the
          <filepath>feedback-database-mysql.properties</filepath> file. It should look like
          this:
          <codeblock outputclass="language-bourne" id="codeblock_all_bgk_54b"># The database management system type. For example MySQL or PostgreSQL.
feedback.database.type = mysql
# The database URL in format: jdbc:mysql://&lt;hostname>:&lt;port>/&lt;database>
# For example: jdbc:mysql://localhost:3306/feedback_db
feedback.datasource.url=jdbc:mysql://localhost:3306/feedback_db
# The username to access the database
feedback.datasource.username=feedback_db_user
# The password to access the database
feedback.datasource.password=password</codeblock></li>
      </ol></li>
    </ol></p>
    <!--Database setup for PostgreSQL-->
    <p id="PostgreSQL">To connect <ph keyref="product"/> to the PostgreSQL database, follow these
      steps:<ol id="ol_klb_yvp_2mb">
        <li id="li_bll_bgk_54b">Create a database user that will be used by <ph keyref="product"/> to connect to the
          database. For example,
          <filepath>feedback_db_user</filepath>:<codeblock outputclass="language-bourne" id="codeblock_cll_bgk_54b">CREATE USER feedback_db_user WITH PASSWORD 'password';</codeblock><p id="p_dll_bgk_54b">For
            more details, see: <xref href="https://www.postgresql.org/docs/12/sql-createuser.html"
              format="html" scope="external"/>.</p></li>
        <li id="li_ell_bgk_54b">Create the database where <ph keyref="product"/> will store its data. For example,
          <filepath>feedback_db</filepath>:
          <codeblock outputclass="language-bourne" id="codeblock_fll_bgk_54b">CREATE DATABASE feedback_db ENCODING='UTF8' LC_COLLATE='C' LC_CTYPE='C' TEMPLATE='template0';</codeblock><p id="p_gll_bgk_54b">The
            database must have the encoding set of UTF8. For more details, see: <xref
              href="https://www.postgresql.org/docs/12/sql-createdatabase.html" format="html"
              scope="external"/>.</p></li>
        <li id="li_hll_bgk_54b">The user needs to have permission to connect to the database, create and populate the
          tables, etc. You can provide these permissions with the following command:
          <codeblock outputclass="language-bourne" id="codeblock_ill_bgk_54b">GRANT ALL PRIVILEGES ON DATABASE feedback_db TO feedback_db_user;</codeblock><p id="p_jll_bgk_54b">For
            more details, see: <xref href="https://www.postgresql.org/docs/12/sql-grant.html"
              format="html" scope="external"/>.</p></li>
        <li id="li_kll_bgk_54b">Configure <ph keyref="product"/> to connect to the database: <ol id="ol_olb_yvp_2mb">
          <li id="li_lll_bgk_54b">Go to <codeph>/config</codeph> and create a file named
            <filepath>feedback-database.properties</filepath>.</li>
          <li id="li_mll_bgk_54b">Edit the file and update it with your configuration. An example is provided in the
            <filepath>feedback-database-psql.properties</filepath> file. It should look like
            this:<codeblock outputclass="language-bourne" id="codeblock_nll_bgk_54b"># The database management system type. For example MySQL or PostgreSQL.
feedback.database.type = postgresql
# The database URL in format: jdbc:postgresql://&lt;hostname>:&lt;port>/&lt;database>
# For example: jdbc:postgresql://localhost:5432/feedback_db
feedback.datasource.url=jdbc:postgresql://localhost:5432/feedback_db
# The username to access the database
feedback.datasource.username=feedback_db_user
# The password to access the database
feedback.datasource.password=password</codeblock></li>
        </ol></li>
      </ol></p>
    <!--Base URL note-->
    <note type="warning" id="site-base-url-note">The comments component will only appear on pages
      within the hierarchy of this base URL. For example, <filepath>https://example.com/a</filepath>
      <b>IS</b> a base URL for <filepath>https://example.com/a/b</filepath>, while it <b>IS NOT</b>
      a base URL for <filepath>https://example.com/abc</filepath>.</note>
    <!--LDAP-->
    <ol id="ul_nsj_j4s_zmb">
      <li id="li_kkw_dgk_54b">Enable LDAP authentication support by editing the
          <filepath>$OXYGEN_FEEDBACK_INSTALL_DIR/oxygen-feedback-home/config/feedback-ldap.properties</filepath>
        file and set the <codeph>feedback.ldap.enabled</codeph> property to <b>true</b>.</li>
      <li id="li_lkw_dgk_54b">Configure the URL for your LDAP server by setting the
        <codeph>feedback.ldap.serverUrl</codeph> property. For
        example:<codeblock outputclass="language-bourne" id="codeblock_mkw_dgk_54b">feedback.ldap.serverUrl=ldap://ldap.example.com:33389/dc=myco,dc=org</codeblock></li>
      <li id="li_nkw_dgk_54b">
        <p id="p_okw_dgk_54b">Specify the pattern for the search filter used to identify a user
          entity on the LDAP server by setting the <codeph>feedback.ldap.userSearchFilter</codeph>
          property. For
          example:<codeblock outputclass="language-bourne" id="codeblock_pkw_dgk_54b">(|(mail={0})(uid={0}))</codeblock></p>
        <p id="p_qkw_dgk_54b">The substituted parameter is the user's login name. This example
          pattern enables user authentication with both the username and email address.</p>
      </li>
      <li id="li_rkw_dgk_54b">Specify the name of the email attribute for the LDAP user entity by
        setting the <codeph>feedback.ldap.emailAttribute</codeph> property.<note type="important"
          id="note_skw_dgk_54b">For the authentication to work, it is mandatory that your LDAP users
          entities have an associated email address.</note></li>
      <li id="li_tkw_dgk_54b">Specify whether or not new account registration is allowed by setting
        the <codeph>feedback.ldap.userRegistrationEnabled</codeph> property. For example, to disable
        new account registration (hides the <uicontrol>Sign Up</uicontrol> form in the login
        page):<codeblock outputclass="language-bourne" id="codeblock_ukw_dgk_54b">feedback.ldap.userRegistrationEnabled=false</codeblock><note
          id="note_vkw_dgk_54b">The <codeph>feedback.ldap.userRegistrationEnabled</codeph> property
          does not disable the possibility of authenticating using a local (DB) account. It only
          hides the <uicontrol>Sign Up</uicontrol> form, thus inhibiting the possibility of creating
          new local user accounts.</note></li>
    </ol>
    <p id="p_wkw_dgk_54b"><b>Example of the Configuration Properties
      File</b><codeblock outputclass="language-bourne" id="codeblock_xkw_dgk_54b">###########################################################################
# Stores the configuration properties for the LDAP authentication support #
###########################################################################

# Flag used to enable the LDAP authentication support.
feedback.ldap.enabled=true

# Flag used to enable users to register with a Feedback local (non-ldap) account.
feedback.ldap.userRegistrationEnabled=true

# Specifies the LDAP server URL of the form ldap://localhost:389/base_dn
# LDAPS URLs may be used
# For example: "ldap://ldap.example.com:33389/dc=myco,dc=org".
feedback.ldap.serverUrl=ldap://ldap.example.com:33389/dc=myco,dc=org

# The LDAP filter used to search for users. 
# For example "(uid={0})". The substituted parameter is the user's login name.
feedback.ldap.userSearchFilter=(|(mail={0})(uid={0}))

# Context name to search for users in, relative to the Base DN specified in the server URL
# May be empty -> the search will be performed against the Base DN
# For example: "cn=users"
# => Considering "ldap://ldap.example.com:33389/dc=myco,dc=org" as server URL, then the users will be searched under "cn=users,dc=myco,dc=org"
feedback.ldap.userSearchBase=cn=users

# The name of the email attribute of the user entity.
# Defaults to 'mail'
feedback.ldap.emailAttribute=mail

# The name of the attribute containing the user's full (display) name.
# Defaults to 'cn'
feedback.ldap.nameAttribute=cn

# Credentials of the user that has privileges to search the directory. Simple binding is used.
# If not provided, anonymous bind is used.
feedback.ldap.admin.dn=cn=admin,cn=users,dc=myco,dc=org
# Must be non-empty if 'feedback.ldap.admin.dn' is provided
feedback.ldap.admin.password=myPassword</codeblock></p>
    <p id="p_ohn_qzz_gpb">If your LDAP server does not support anonymous binding (i.e. it requires
      authentication), you can specify the <i>DN</i> (<xref
        href="https://ldap.com/ldap-dns-and-rdns/" format="html" scope="external">distinguished
        name</xref>) and password of a user that has privileges for searching the LDAP user
      directory by setting both of the following configuration properties in the
        <filepath>$OXYGEN_FEEDBACK_HOME_DIR/config/feedback-ldap.properties</filepath> file:<ul
        id="ul_szz_1b1_hpb">
        <li id="li_tzz_1b1_hpb"><b><codeph>feedback.ldap.admin.dn</codeph></b> - Specifies the
          distinguished name of the user with LDAP searching privileges.</li>
        <li id="li_t2w_jb1_hpb"><b><codeph>feedback.ldap.admin.password</codeph></b> - Specifies the
          password of the user with LDAP searching privileges.</li>
      </ul><note id="note_oty_mb1_hpb">If these properties are missing or left blank, anonymous
        binding is used.</note></p>
    <p id="p_gln_lc1_hpb">The following optional properties can also set in the
      <filepath>$OXYGEN_FEEDBACK_HOME_DIR/config/feedback-ldap.properties</filepath> file:<ul
        id="ul_nqs_pc1_hpb">
        <li id="li_oqs_pc1_hpb"><b><codeph>feedback.ldap.userSearchBase</codeph></b> - Specifies the
          context name to be used when searching for users (relative to the <i>Base DN</i> specified
          in the server URL). If this property is left empty, the search will be performed against
          the <i>Base DN</i>.</li>
        <li id="li_pqs_pc1_hpb"><b><codeph>feedback.ldap.nameAttribute</codeph></b> - Specifies the
          name of the attribute that contains the full display name of the user. If omitted, the
          value defaults to <b>cn</b>.</li>
      </ul></p>
    <!--User Roles Matrix note-->
    <note id="note_matrix" type="tip">See the <xref href="ofb-user-roles-matrix.dita">User Roles
        Matrix Table</xref> for a comprehensive list of all the user roles and their
      permissions.</note>
    <note id="note_vch_px2_vrb" type="warning"><ph product="feedback-enterprise">The
        subscription</ph><ph product="feedback">Each organization's <xref
          href="ofb-subscription.dita">subscription</xref></ph> has a limit for the number of
        <i>Moderators</i> that can be added to a site configuration. The number of allowed
      moderators per site configuration = <i>site-level moderators</i>
      <b>+</b>
      <i>organization-level moderators</i>
      <b>+</b>
      <i>pending moderator invitations</i>. This means that you cannot invite a new user with a role
      of <i>Moderator</i> or change a user's role to <i>Moderator</i> if <ph
        product="feedback-enterprise">at least one site configuration within </ph>the organization
      has already reached the limit.</note></body>
</topic>
