<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="reusables-ai-plugin">
  <title>reusables-ai-plugin</title>
  <!--OpenAI Configuration-->
  <body>
    <p id="p_f5g_d25_y1c">
      <dl id="openai-settings">
        <dlentry id="dlentry_wvg_d25_y1c">
          <dt>Base URL</dt>
          <dd>The web address of the OpenAI service. By default:
              <codeph>https://api.openai.com</codeph>.</dd>
        </dlentry>
        <dlentry id="dlentry_xvg_d25_y1c">
          <dt>API key</dt>
          <dd>The <b>OpenAI</b> API key necessary to work with the connector. <note
              id="note_zj3_1ll_21c">This option does not get saved in the Project-level
              options.</note></dd>
        </dlentry>
        <dlentry id="dlentry_zvg_d25_y1c">
          <dt>Organization ID</dt>
          <dd>If you belong to multiple organizations, you can specify which <xref
              href="https://platform.openai.com/docs/guides/production-best-practices/setting-up-your-organization"
              format="html" scope="external">organization</xref> is used for an API request. Usage
            from these API requests will count as usage for the specified organization.</dd>
        </dlentry>
        <dlentry id="dlentry_awg_d25_y1c">
          <dt>Default model</dt>
          <dd> The default model to be used for the chat view and for actions that do not explicitly
            specify a model.</dd>
        </dlentry>
        <dlentry id="dlentry_cwg_d25_y1c">
          <dt>Enable text moderation</dt>
          <dd>This setting applies moderation (checks whether content complies with OpenAI's usage
            policies) to both the input text sent to the AI service and the response received from
            the AI service. It is enabled by default.<note id="note_ohy_4vn_h1c" type="tip">
              <p id="p_dwg_d25_y1c">By default, when executing an action using the <b>OpenAI</b>
                connector, three requests are made: </p>
              <ul id="ul_rg1_pvn_h1c">
                <li id="li_fwg_d25_y1c">A moderation on input content request to <xref
                    href="https://platform.openai.com/docs/guides/moderation/quickstart"
                    format="html" scope="external"
                      ><codeph>configured_web_address/v1/moderations</codeph></xref>.</li>
                <li id="li_hwg_d25_y1c">A completion request to <xref
                    href="https://platform.openai.com/docs/guides/text-generation" format="html"
                    scope="external"
                    ><codeph>configured_web_address/v1/chat/completions</codeph></xref>.</li>
                <li id="li_iwg_d25_y1c">
                  <p id="p_jwg_d25_y1c">A moderation on content returned by AI to <xref
                      href="https://platform.openai.com/docs/guides/moderation/quickstart"
                      format="html" scope="external"
                        ><codeph>configured_web_address/v1/moderations</codeph></xref>.</p>
                  <p id="p_kwg_d25_y1c">If your AI service does not require moderation (for example,
                    moderation is already made by chat/completions endpoint) you can disable it by
                    unchecking this checkbox.</p>
                </li>
              </ul>
            </note></dd>
        </dlentry>
        <dlentry id="dlentry_sk2_225_y1c">
          <dt>Extra Headers</dt>
          <dd>Extra name/value parameters to set in the headers that are specific for the AI
              requests.<note id="note_edk_3wn_h1c" type="tip">If the service uses <b>Bearer
                Authentication</b>, you can specify the key in the <b>Key</b> text field. If another
              authentication method is used, the <b>Key</b> field can be left empty, and the
                <b>Extra Headers</b> table can be used to set the authentication info on the request
              header. Note that editor variables can be used in this field and you can set your key
              in editor variables and specify the value in this table like this:
                <codeph>${env(AI_SERVICE_KEY)}</codeph> to access pre-set values of environmental
              variables.</note></dd>
        </dlentry>
        <dlentry id="dlentry_uym_225_y1c">
          <dt>Base URL</dt>
          <dd>The web address where the connector service is located. This value can be found in the
              <b>Keys &amp; Endpoint</b> section when examining your resource from the <b>Azure</b>
            portal. For example: <codeph>https://your-company-name.openai.azure.com/</codeph>.</dd>
        </dlentry>
        <dlentry id="dlentry_vym_225_y1c">
          <dt>Deployment</dt>
          <dd>The deployment name that was chosen when the model was deployed in <b>Microsoft
              Azure</b>.</dd>
        </dlentry>
        <dlentry id="dlentry_wym_225_y1c">
          <dt>API key</dt>
          <dd>
            <p>The <b>Microsoft Azure OpenAI Service</b> key necessary to work with the
              connector.</p>
          </dd>
        </dlentry>
        <dlentry id="dlentry_fxh_325_y1c">
          <dt>Extra Headers</dt>
          <dd>Extra name/value parameters to set in the headers that are specific for the AI
            requests.</dd>
        </dlentry>
        <dlentry id="dlentry_qmt_325_y1c">
          <dt>Base URL</dt>
          <dd>The web address where the connector service is located. By default, it is
              <codeph>https://api.anthropic.com/</codeph>.</dd>
        </dlentry>
        <dlentry id="dlentry_ofl_j25_y1c">
          <dt>API key</dt>
          <dd>The <b>Claude</b> API key necessary to work with the connector.</dd>
        </dlentry>
        <dlentry id="dlentry_rtw_j25_y1c">
          <dt>Default model</dt>
          <dd>Use this drop-down to select the <xref
              href="https://docs.claude.com/claude/docs/models-overview#key-features" format="html"
              scope="external">Claude</xref> default model to be used for the chat view and for
            actions that do not explicitly specify a model.</dd>
        </dlentry>
        <dlentry id="reusables-ai-context">
          <dt>Context prompt</dt>
          <dd>The context provides useful information about the user to the AI and is used in each
            action and chat request to create more relevant and personalized responses. </dd>
        </dlentry>
        <dlentry id="reusable-aditional-context">
          <dt>Additional context files</dt>
          <dd>A list of one or more comma-separated referenced files. The content of these
            referenced files is added to the <uicontrol>Context</uicontrol> value and used in all AI
            action prompts. The file paths can contain editor variables.</dd>
        </dlentry>
        <dlentry id="reusables-enable-streaming">
          <dt>Enable streaming</dt>
          <dd>This option controls whether streaming is enabled. When enabled (default),
            AI-generated answers are delivered in real time as a continuous flow. If disabled, the
            complete answer is delivered all at once after the processing is finished.</dd>
        </dlentry>
      </dl>
    </p>
    <!--MS Azure User based authentication-->
    <p id="Azure-Auth-p-1"><b><u>Identity-based Authentication for Microsoft Azure OpenAI
          Connector</u></b></p>
    <p id="Azure-Auth-p-2">The Microsoft Azure OpenAI connector supports the following
      identity-based authentication flows: <dl id="dl_gpv_2rw_tfc">
        <dlentry id="authorization_code_flow">
          <dt>OAuth 2.0 Authorization Code Flow (User Sign-in)</dt>
          <dd>
            <p id="p_iql_gtg_5fc">This method enables interactive user sign-in via a browser. It is
              recommended for desktop applications used by individual users with personal or work
              accounts.</p>
            <p id="p_jql_gtg_5fc">When a user triggers an AI action and is not authenticated, the
              application displays a dialog box prompting them to sign in using their Microsoft
              account. Upon successful login, the application retrieves an access token and
              continues operation.</p>
            <p id="p_kql_gtg_5fc">Required Environment Variables to configure authentication flow: </p>
            <table frame="all" rowsep="1" colsep="1" id="table_ipv_2rw_tfc">
              <tgroup cols="2" align="left">
                <thead>
                  <row>
                    <entry>Variable</entry>
                    <entry>Description</entry>
                  </row>
                </thead>
                <tbody>
                  <row>
                    <entry>AZURE_OAUTH_TENANT_ID</entry>
                    <entry>Microsoft Entra (AAD) Tenant ID.</entry>
                  </row>
                  <row>
                    <entry>AZURE_OAUTH_CLIENT_ID</entry>
                    <entry>Application (client) ID.</entry>
                  </row>
                  <row>
                    <entry>AZURE_OAUTH_REDIRECT_URI</entry>
                    <entry>Redirect URI configured in the Entra app. This must be a localhost URL
                      (for example: <codeph>http://localhost:8085/callback</codeph>).</entry>
                  </row>
                </tbody>
              </tgroup>
            </table>
            <note id="note_pwl_c1y_tfc">You must register an application in Microsoft Entra ID that
              includes the specified redirect URI. The signed-in user must also be assigned a role
              that allows access to the Azure OpenAI service (e.g. <xref
                href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/role-based-access-control#cognitive-services-openai-user"
                format="html" scope="external">Cognitive Services OpenAI User</xref>).</note>
          </dd>
        </dlentry>
        <dlentry id="service_principal_authentication">
          <dt>Service Principal Authentication</dt>
          <dd>
            <p id="p_mql_gtg_5fc">Service principal authentication is ideal for non-interactive
              scenarios, such as background processes or automation scripts. </p>
            <p id="p_nql_gtg_5fc">Choose one of the options below if you need to authenticate
              without prompting the user to sign in.</p>
            <p id="p_oql_gtg_5fc">Before you begin, <xref
                href="https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-service-principal-portal#register-an-application-with-microsoft-entra-id-and-create-a-service-principal"
                format="html" scope="external">create a service principal</xref> and <xref
                href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/role-based-access-control#add-role-assignment-to-an-azure-openai-resource"
                format="html" scope="external">assign a role</xref> to it that allows access to the
              Azure OpenAI service (e.g. the <xref
                href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/role-based-access-control#cognitive-services-openai-user"
                format="html" scope="external">Cognitive Services OpenAI User</xref> role).</p>
            <ul id="ol_yth_mdy_tfc">
              <li id="li_pql_gtg_5fc">
                <p id="p_qql_gtg_5fc"><b>Client Secret</b></p>
                <p id="p_rql_gtg_5fc">Use this method for simpler setups in trusted
                  environments.</p>
                <p id="p_sql_gtg_5fc">Be aware that on desktop systems, secrets stored in
                  environment variables or config files are not encrypted by default and may be
                  exposed to other local users or processes.</p>
                <p id="p_tql_gtg_5fc">Required Environment Variables: </p>
                <table frame="all" rowsep="1" colsep="1" id="table_kpv_2rw_tfc">
                  <tgroup cols="2" align="left">
                    <thead>
                      <row>
                        <entry>Variable name</entry>
                        <entry>Value</entry>
                      </row>
                    </thead>
                    <tbody>
                      <row>
                        <entry>AZURE_CLIENT_ID</entry>
                        <entry>ID of a Microsoft Entra application.</entry>
                      </row>
                      <row>
                        <entry>AZURE_TENANT_ID</entry>
                        <entry>ID of the application's Microsoft Entra tenant.</entry>
                      </row>
                      <row>
                        <entry>AZURE_CLIENT_SECRET</entry>
                        <entry>One of the application's client secrets.</entry>
                      </row>
                    </tbody>
                  </tgroup>
                </table>
              </li>
              <li id="li_vql_gtg_5fc">
                <p id="p_wql_gtg_5fc"><b>Client Certificate</b></p>
                <p id="p_xql_gtg_5fc">Use this method in high-security environments where
                  certificate-based authentication is preferred over storing client secrets. </p>
                <p id="p_yql_gtg_5fc">Be aware that certificate files, like other secrets, must be
                  protected properly—especially on desktop systems where local users may gain access
                  to file contents if not secured appropriately.</p>
                <p id="p_zql_gtg_5fc">Required Environment Variables: </p>
                <table frame="all" rowsep="1" colsep="1" id="table_cvh_42y_tfc">
                  <tgroup cols="2" align="left">
                    <thead>
                      <row>
                        <entry>Variable name</entry>
                        <entry>Value</entry>
                      </row>
                    </thead>
                    <tbody>
                      <row>
                        <entry>AZURE_CLIENT_ID</entry>
                        <entry>ID of a Microsoft Entra application.</entry>
                      </row>
                      <row>
                        <entry>AZURE_TENANT_ID</entry>
                        <entry>ID of the application's Microsoft Entra tenant.</entry>
                      </row>
                      <row>
                        <entry>AZURE_CLIENT_CERTIFICATE_PATH</entry>
                        <entry>Path to the PEM or PFX certificate file.</entry>
                      </row>
                      <row>
                        <entry>AZURE_CLIENT_CERTIFICATE_PASSWORD</entry>
                        <entry>Password for the certificate file (if any).</entry>
                      </row>
                    </tbody>
                  </tgroup>
                </table>
              </li>
            </ul>
          </dd>
        </dlentry>
      </dl></p>
    <p id="Azure-Auth-p-3">The connector will automatically detect and use the correct
      authentication flow based on which environment variables you have configured. </p>
    <note id="Azure-Auth-note-1">The application should be restarted after each environment-variable
      change for the changes to take effect. </note>
    <!--Common preferences-->
    <p id="p_p51_mbk_sfc">
      <dl>
        <dlentry id="dlentry_dpz_mbk_sfc">
          <dt>Enable AI Positron</dt>
          <dd>Deselect this setting to disable the AI assistant. Combined with the
              <uicontrol>Project Options</uicontrol> radio button, you can disable the AI assistant
            for certain projects.</dd>
        </dlentry>
        <dlentry id="dlentry_i4l_nbk_sfc">
          <dt>Automatic Validation and Correction</dt>
          <dd>
            <p id="p_em3_sbk_sfc">This section contains options for specifying if and when you want
              AI-generated content automatically validated:</p>
            <p id="p_rxk_sxh_pgc">
              <dl id="dl_hnq_sxh_pgc">
                <dlentry id="dlentry_inq_sxh_pgc">
                  <dt>After generation, for validation problems in complete XML documents</dt>
                  <dd>When enabled (default), AI-generated XML content is automatically validated
                    and the AI attempts to fix any detected validation errors in complete XML
                    documents returned by the AI model.</dd>
                </dlentry>
                <dlentry id="dlentry_ixp_2yh_pgc">
                  <dt>After generation, for well-formedness problems in XML fragments</dt>
                  <dd>When enabled, AI-generated XML content is automatically validated and the AI
                    attempts to fix any detected well-formedness errors in XML fragments returned by
                    the AI model.</dd>
                </dlentry>
                <dlentry id="dlentry_ccm_jyh_pgc">
                  <dt>After insertion in the document</dt>
                  <dd>When enabled (default), AI-generated XML content is automatically validated
                    and the AI attempts to fix any detected validation errors when the AI-generated
                    content is inserted into the document (in the editor).</dd>
                </dlentry>
              </dl>
            </p><note id="note_c33_2zh_pgc">The AI will not be able to find solutions for certain types of errors,
              so some manual corrections will still be required in those situations.</note>
          </dd>
        </dlentry>
      </dl>
    </p>
    <!--Built in AI Actions-->
    <p id="p_dd5_rbx_jbc">
      <dl id="dl_lcm_vwz_1xb">
        <dlentry id="dlentry_accessibility">
          <dt>Accessibility</dt>
          <dd>
            <ul>
              <li id="li_c14_ybc_qbc"><uicontrol>Generate Image Alternate Text</uicontrol> -
                Generates an alternate text for an image that is selected in the main editing area
                when working with DITA XML content in the Author visual editing mode.<note
                  type="tip" id="note_xh1_3bb_1fc">Conveniently access this action by clicking the
                      <uicontrol><image href="../../img/AlterrnateText16.png"/>Generate Alternate
                    Text</uicontrol> button that is available from the floating toolbar that appears
                  when you select an image.</note></li>
            </ul>
          </dd>
        </dlentry>
        <dlentry id="dlentry_content-generation">
          <dt>Content Generation</dt>
          <dd>
            <ul id="ul_qbx_wwz_1xb">
              <li id="li_fd5_rbx_jbc"><uicontrol>Generate Documentation Draft</uicontrol> -
                Generates a documentation draft of a DITA XML topic based on a configuration file
                that fine tunes the generation process by specifying the context, audience, summary,
                instructions, images, and a similar topic to help the AI generate the draft
                content.</li>
              <li id="li_nrq_gz3_qxb"><uicontrol>New DITA Topic</uicontrol> - Generates a DITA XML
                topic based on a text description entered in a popup dialog box. For <b>Oxygen</b>
                version 27 and newer, related content from the current set of project resources is
                also taken into account.</li>
              <li id="li_gd5_rbx_jbc"><uicontrol>Update Content Based on Images</uicontrol> -
                Updates the content of a DITA XML topic based on the images that it references.</li>
              <li id="li_tzv_hz3_qxb"><uicontrol>Short Description</uicontrol> - Generates a short
                description ( inside a <xmlelement>shortdesc</xmlelement> element) based on a
                summary of the selected text (or the entire document if there is no selection). You
                can configure the style and the approximate number of sentences to be
                generated.</li>
              <li id="li_g5n_jz3_qxb"><uicontrol>Index Terms</uicontrol> - Generates a
                  <xmlelement>keywords</xmlelement> element that contains index terms obtained from
                the selected text (or the entire document if there is no selection).</li>
              <li><uicontrol>Formula/Equation</uicontrol> - Generates an AI proposal for a MathML
                formula or equation based on information provided by the user when invoking the
                action (for example, a description of a substance, physics formula, mathematical
                expression, or LaTeX equation).</li>
              <li id="li_id5_rbx_jbc"><uicontrol>Follow Instructions (available for XSLT,
                  Schematron, XSD, CSS, XQuery, JSON, and JSON Schema)</uicontrol> - Replaces the
                selected instructions with content generated based on them.</li>
            </ul>
          </dd>
        </dlentry>
        <dlentry id="dlentry_development">
          <dt>Development</dt>
          <dd>
            <p id="p_yvf_zdx_jbc">
              <ul id="ul_zvf_zdx_jbc">
                <li id="li_awf_zdx_jbc"><uicontrol>Explain Code</uicontrol> - Generates an
                  explanation of the code found in the current selection or the element content at
                  the current cursor location.</li>
                <li id="li_bwf_zdx_jbc"><uicontrol>Chat About Code</uicontrol> - Creates a new chat
                  to start a discussion with the AI regarding the code found in the current
                  selection or the element content at the current cursor location.</li>
                <li id="li_n1s_fwb_qbc"><uicontrol>Document Code (available for XSLT, XSD, and
                    Schematron)</uicontrol> - Generates the documentation for the code and includes
                  it as a comment in the document. If code is selected, it documents the selected
                  code. Otherwise, it documents the element at the cursor location. It inserts the
                  documentation as an XML comment before the documented code.</li>
                <li id="li_p2q_mxb_qbc"><uicontrol>Generate Code</uicontrol> - Generates the code
                  for the current editor type based on an instruction. It also reuses components
                  found in the current document when generating the new code. The instruction can be
                  a selected text, in which case the text will be replaced with the generated code.
                  Alternatively, the instruction can be the previous XML comment, in which case the
                  generated text will be inserted after the comment.<note type="tip">You can use the
                        <uicontrol><shortcut>Ctrl + G (Command + G on macOS)</shortcut></uicontrol>
                    keyboard shortcut to invoke the <uicontrol>Generate Code</uicontrol> action. A
                    text field will be presented at the cursor location where you can specify what
                    you want to generate.</note></li>
                <li id="li_n5z_v1h_zcc"><uicontrol>Suggest Refactoring (available for XSLT and
                    XSD)</uicontrol> - Generates a suggestion for refactoring the selected code to
                  simplify it and make it easier to read and understand. It has some enhanced
                  features for XSLT files, such as it upgrades selected XSLT code to version 3.0, it
                  breaks down large templates into small units, it incorporates
                    <codeph>xsl:try</codeph> and <codeph>xsl:catch</codeph> instructions for error
                  handling, and adds XML comments to clarify the purpose and functionality of the
                  code. </li>
                <li id="li_u45_h3l_tdc"><uicontrol>Annotate Code (available for XSLT, Schematron,
                    and XSD)</uicontrol> - Generates XML comments within the code found in the
                  current selection, at the cursor location, or in the whole document. The generated
                  annotations explain key concepts of the code.</li>
                <li id="li_zsw_svk_dhc"><uicontrol>Autocomplete</uicontrol> - Generates
                  context-aware code at the cursor location, automatically adapting to the
                  surrounding style and structure of the current type of document.</li>
              </ul>
            </p>
            <p>
              <note type="tip">Sample files for the Development actions can be found at <xref
                  href="https://github.com/oxygenxml-incubator/ai-positron-assistant-samples/tree/main/Code%20Development"
                  format="html" scope="external"/>.</note>
            </p>
          </dd>
        </dlentry>
        <dlentry id="dlentry_rewrite">
          <dt>Rewrite</dt>
          <dd>
            <ul id="ul_p21_xdn_kxb">
              <li id="li_zr3_zg5_4xb"><b>Correct Grammar</b> - Generates a suggestion for correcting
                the grammar and spelling within the selected content.</li>
              <li id="li_tt5_mz3_qxb"><uicontrol>Improve Readability</uicontrol> - Modifies the
                selected content to improve readability and fix grammar/spelling errors. If you
                hover the mouse prompt over this button, a <uicontrol><image
                    href="../../img/Settings16.png" id="image_wbs_3hb_w1c"/>Settings</uicontrol>
                button becomes available in the top-right corner. Clicking the <uicontrol><image
                    href="../../img/Settings16.png" id="image_xbs_3hb_w1c"/>Settings</uicontrol>
                button opens a pop-up window where you can choose the writing level of the content
                to be generated. You can choose between: <uicontrol>Beginner</uicontrol>,
                  <uicontrol>Intermediate</uicontrol>, <uicontrol>Advanced</uicontrol>, and
                  <uicontrol>Expert</uicontrol>.</li>
              <li id="li_t34_lz3_qxb"><uicontrol>Use Active Voice</uicontrol> - Generates a
                suggestion for replacing the selected content with content that has been converted
                from passive to active voice.</li>
              <li id="li_cwq_lqm_y2c"><uicontrol>Improve Structure</uicontrol> - Improves the
                selected DITA XML content by adding additional structure or inline elements.</li>
              <li id="li_r34_lz3_qxb"><uicontrol>Itemize</uicontrol> - Generates a suggestion for
                converting the selected content into a list of items.</li>
              <li id="li_s34_lz3_qxb"><uicontrol>Join Items</uicontrol> - Generates a suggestion for
                converting the selected list of items into a paragraph.</li>
            </ul>
          </dd>
        </dlentry>
        <dlentry id="dlentry_review">
          <dt>Review</dt>
          <dd>
            <ul id="ul_ynf_jn3_ybc">
              <li id="li_tx3_4qm_y2c"><uicontrol>Proofread</uicontrol> - Adds comments in content
                that has logical consistency problems, grammar or spelling mistakes, or is hard to
                read and comprehend.</li>
              <li id="li_ux3_4qm_y2c"><uicontrol>Resolve Comments</uicontrol> - Changes the selected
                content based on the suggestions within comments and then removes the comments.</li>
            </ul>
          </dd>
        </dlentry>
        <dlentry id="dlentry_overview">
          <dt>Overview</dt>
          <dd>
            <p id="p_ohd_4z3_qxb">
              <ul id="ul_bwl_3xz_1xb">
                <li id="li_shd_4z3_qxb"><uicontrol>Answer Questions</uicontrol> - Generates answers
                  to questions that the AI finds within the selected content (or the entire document
                  if there is no selection).</li>
                <li id="li_rhd_4z3_qxb"><uicontrol>Generate Questions</uicontrol> - Generates a list
                  of five questions that are answered within the selected content (or the entire
                  document if there is no selection).</li>
                <li id="li_qhd_4z3_qxb"><uicontrol>Summarize</uicontrol> - Generates a summary of
                  the selected content (or the entire document if there is no selection).</li>
                <li id="li_phd_4z3_qxb"><uicontrol>Readability</uicontrol> - Generates suggestions
                  for changing the selected content (or the entire document if there is no
                  selection) to improve its general readability.</li>
              </ul>
            </p>
          </dd>
        </dlentry>
        <dlentry id="dlentry_translation">
          <dt>Translation</dt>
          <dd>
            <p id="p_kd5_rbx_jbc">
              <ul id="ul_ybs_3hb_w1c">
                <li id="li_ld5_rbx_jbc"><uicontrol>English</uicontrol>,
                    <uicontrol>French</uicontrol>, <uicontrol>German</uicontrol>,
                    <uicontrol>Japanese</uicontrol> - These actions translate the selected text to
                  the target language, while preserving the original XML markup.</li>
                <li id="li_md5_rbx_jbc"><uicontrol>Other...</uicontrol> - This action behaves like
                  the previous ones, but it allows you to provide the target language. You can
                  either choose from the predefined values or type another one.</li>
              </ul>
            </p>
          </dd>
        </dlentry>
        <dlentry id="dlentry_intelligent-agents">
          <dt>Intelligent Agents</dt>
          <dd>
            <ul id="ul_tnm_2mt_2dc">
              <li id="li_gen_agent_instructions"><uicontrol>Generate Agent Instructions</uicontrol>
                - Generates a project context prompt that helps the AI understand your documentation
                project. The action analyzes the structure and conventions of a project’s structure.
                It generates comprehensive AI instructions tailored to the project’s specific
                organization, framework, and metadata requirements, ensuring that subsequent
                AI-generated content remains aligned, consistent and framework-compliant. The
                generated context prompt is automatically saved in your project as a Markdown file
                and used by AI Positron onward when using the chat or available AI actions. </li>
              <li id="li_create-topics"><uicontrol>Create Topics</uicontrol> - Generates DITA XML
                topics based upon user input, incorporating relevant project content. It creates a
                topic hierarchy, assigns DITA document types, and proposes a DITA map location.
                Topics are then saved and added upon user approval. The AI considers the DITA map
                opened in the DITA Maps Manager and the selected topic and then looks for similar
                content in topics gathered from the related links or through the Retrieval-Augmented
                Generation (RAG) process. After the action processes, a
                  <uicontrol>Preview</uicontrol> dialog box shows the list of proposed changes.</li>
              <li id="li_expand-draft"><uicontrol>Expand Draft</uicontrol> - Enhances a draft of a
                DITA XML topic by refining the existing content, adding new content, adding markup
                that is consistent with similar topics, and generating documentation based on the
                referenced images using the <i>Vision</i> support. The AI looks for similar content
                in topics gathered from the related links or through the Retrieval-Augmented
                Generation (RAG) process.</li>
              <li id="li_split-topic"><uicontrol>Split Topic</uicontrol> - Analyzes the current DITA
                XML topic based on modular document development best practices. If the topic is too
                large or contains multiple subjects, the AI may split it into several topic files.
                References to the new topics are also added in the DITA map that is currently open
                in the DITA Maps Manager. After the action processes, a
                  <uicontrol>Preview</uicontrol> dialog box shows the list of proposed changes.</li>
              <li id="li_fix-validation"><uicontrol>Fix Validation Problems</uicontrol> - Validates
                the entire content of the current document, finds problems, and then uses AI to fix
                all the reported problems.</li>
              <li><uicontrol>Fix Terminology Problems</uicontrol> [optional] - When installed along
                with the latest <uicontrol>Terminology Checker</uicontrol> add-on, this action that
                is contributed by the <uicontrol>Terminology Checker</uicontrol> gathers terminology
                problems from the entire content of the current document, and then uses AI to fix
                all the reported problems.</li>
            </ul>
          </dd>
        </dlentry>
        <dlentry id="dlentry_reuse">
          <dt>Reuse</dt>
          <dd>
            <p>
              <ul>
                <li><uicontrol>Product Names</uicontrol> - Finds product names in the selected
                  content and replaces them with key references (<xmlatt>keyref</xmlatt>). If keys
                  are not defined for specific product names, those names are wrapped in
                    <xmlelement>keyword</xmlelement> elements.</li>
                <li><uicontrol>Component</uicontrol> - Use the AI to identify the closest existing
                  reusable component that matches the current selected paragraph.</li>
              </ul>
            </p>
          </dd>
        </dlentry>
        <dlentry id="dlentry_dita-conversion">
          <dt>DITA Conversion</dt>
          <dd>
            <ul id="ul_tpk_1ph_1fc">
              <li><uicontrol>Analyze and Update Topic</uicontrol> - This action analyzes and
                optimizes your DITA topics to ensure modularity and consistency. It reviews and
                updates the topics to align with the DITA standards, generates new topics, and
                updates the DITA map as needed.</li>
              <li><uicontrol>Convert to [DITA_TYPE]</uicontrol> - Actions that convert plain text,
                Markdown, or DITA content to a specific type of DITA topic: <ul id="ul_fpd_fph_1fc">
                  <li><uicontrol>Task</uicontrol> - A topic type used to describe a series of steps
                    to accomplish a specific goal. It is ideal for procedural information.</li>
                  <li><uicontrol>Concept</uicontrol> - A topic type used to explain an idea,
                    definition, or concept. It is typically used for background or explanatory
                    information.</li>
                  <li><uicontrol>Reference</uicontrol> - A topic type used to provide detailed,
                    structured information such as tables, lists, or specifications. It is often
                    used for quick look-up information.</li>
                  <li><uicontrol>Troubleshooting</uicontrol> - A topic type used to describe
                    problems, their causes, and solutions. It is designed to help users resolve
                    issues effectively.</li>
                  <li><uicontrol>Glossary</uicontrol> - A topic type used to define terms and
                    provide explanations. It is commonly used to build a glossary of terms for a
                    project or document.</li>
                </ul></li>
            </ul>
          </dd>
        </dlentry>
        <dlentry id="dlentry_file-creation">
          <dt>File Creation</dt>
          <dd>
            <p id="p_jyb_rqm_y2c">
              <ul id="ul_kyb_rqm_y2c">
                <li id="li_ryb_rqm_y2c"><uicontrol>Create New XSLT</uicontrol> - Generates a new
                  XSLT file based on a text description that you provide in a pop-up dialog
                  box.</li>
                <li id="li_syb_rqm_y2c"><uicontrol>Create New XML Schema</uicontrol> - Generates a
                  new XML Schema file (XSD) based on a text description that you provide in a pop-up
                  dialog box.</li>
                <li id="li_tyb_rqm_y2c"><uicontrol>Create New Schematron</uicontrol> - Generates a
                  new Schematron file based on a text description that you provide in a pop-up
                  dialog box.</li>
                <li id="li_uyb_rqm_y2c"><uicontrol>Create New JSON Schema</uicontrol> - Generates a
                  new JSON Schema file based on a text description that you provide in a pop-up
                  dialog box.</li>
                <li id="li_vyb_rqm_y2c"><uicontrol>Create New DTD</uicontrol> - Generates a new
                  Document Type Definition (DTD) file based on a text description that you provide
                  in a pop-up dialog box.</li>
              </ul>
            </p>
            <p>
              <note type="tip">The <xref keyref="wizard_new-document">New Document Wizard</xref>
                contains a folder named <uicontrol>AI Positron Templates</uicontrol> with new file
                templates for creating these same types of documents (XSLT, XML Schema, Schematron,
                JSON schema, and DTD).</note>
            </p>
          </dd>
        </dlentry>
        <dlentry id="dlentry_marketing">
          <dt>Marketing</dt>
          <dd>
            <p id="p_dwj_gxn_2yb">
              <ul id="ul_ewj_gxn_2yb">
                <li id="li_op3_djt_fyb"><uicontrol>Release Notes</uicontrol> - Creates release notes
                  based on a set of features or issue ticket numbers with optional
                  descriptions.</li>
                <li id="li_qnx_fjt_fyb"><uicontrol>Marketing Post</uicontrol> - Creates a marketing
                  post based on a list of ideas or release notes.</li>
                <li id="li_nd5_rbx_jbc"><uicontrol>Improve SEO</uicontrol> - Rewrites the content to
                  enhance search engine optimization.</li>
                <li id="li_fwj_gxn_2yb"><uicontrol>Pain-Agitate-Solution</uicontrol> - Rewrites the
                  content using a marketing style based on the <term>Pain-Agitate-Solution</term>
                  framework.</li>
                <li id="li_mky_wxn_2yb"><uicontrol>Features-Advantages-Benefits</uicontrol> -
                  Rewrites the content using a marketing style based on the
                    <term>Features-Advantages-Benefits</term> framework.</li>
              </ul>
            </p>
          </dd>
        </dlentry>
      </dl>
    </p>
    <!--AI Positron View-->
    <p id="para1">After a conversation has been initiated, to clear the information in the chat pane
      and start a new chat, click the <uicontrol><image href="../../img/ai-Chat16.png"/>New
        Chat</uicontrol> button in the far-left side of the view's header.</p>
    <p id="para2">The chat <uicontrol><image href="../../img/ai-history-drop.png"
          id="image_nwv_c4j_bcc"/>History</uicontrol> drop-down toolbar button makes it easy to go
      back to previous conversations and continue them.</p>
    <p id="para3">The <uicontrol>Actions</uicontrol> drop-down menu at the top of the <uicontrol>AI
        Positron</uicontrol> view contains the available AI-powered actions that can be used to generate and
      refine content. The AI actions are also available as buttons in the main chat pane when you first log in
      or when the recent chat is cleared. Simply select the action to trigger it. You can hover the mouse
      cursor over an action to see a description of what the action does. A set of 5 recently used actions are
      also available in the <uicontrol>Actions</uicontrol> drop-down menu. The <uicontrol><image
          href="../../img/ai-record18.png"/>Record</uicontrol> button located in the
        <uicontrol>Actions</uicontrol> drop down menu allows you to create custom actions or prompts by
      recording changes.</p>
    <p id="para4">A drop-down button on the right side of the view's header allows you to select the
      AI model to be used for chat purposes and for the processing of actions.</p>
    <p id="para5">The main chat pane presents the results after processing an action and allows you
      to further refine the responses by sending messages to the <b>Positron</b> service platform.
      When an AI Positron action is triggered, the chat pane displays the progress and results.</p>
    <p id="para6">You can also start chatting with the AI directly in the chat input box at the
      bottom of the view. <note id="note_dms_klb_jfc" type="tip">You can invoke an existing action
        directly from the chat input box by providing general instructions to the AI. For example,
        to invoke the <uicontrol>Correct Grammar</uicontrol> action, you could type something
        similar to the following in the chat input
        box:<codeblock outputclass="language-bourne">Invoke the action to correct grammar in the current document and update the document based on the results</codeblock></note></p>
    <p id="para7">The response is received from the server in streaming mode (the AI sends chunks of
      the response as it is being generated rather than waiting to send the entire response after it
      is generated). When the AI returns XML, Markdown, or JSON content, the response area has the
      appropriate syntax highlights, depending on the type of content received. You can open links
      from the response area in a web browser by hovering over the links, then hold the
        <uicontrol>Control/Command</uicontrol> key and mouse click.</p>
    <p>
      <ul id="ul_jkj_vss_jbc">
        <li id="li1"><uicontrol><image href="../../img/AICreateDocument16.png"
              id="image_b5x_dcv_fcc"/>Create document</uicontrol> - Available only for the actions
          that generate an entire DITA topic, this action opens the topic in a new editor.</li>
        <li id="li2"><uicontrol><image href="../../img/AI-Insert16.png"/>Insert/<image
              href="../../img/AI-Replace16.png" id="image_ykw_ybv_fcc"/>Replace</uicontrol> -
          Inserts the response at the cursor location within the document (or replaces the selected
          content).</li>
        <li id="li3"><uicontrol><image href="../../img/Copy16.png"/>Copy</uicontrol> - Copies the
          response to the system clipboard.</li>
        <li id="li4"><uicontrol><image href="../../img/AI-Regenerate16.png"/>Regenerate</uicontrol>
          - Requests the AI to give another response. You can also use the drop-down arrow to decide
          which engine model to use.</li>
        <li id="li5"><uicontrol><image href="../../img/ReviewApprove16.png"/>Review documents and
            approve AI modifications</uicontrol> - Available for actions that save changes to disk,
          this opens a pop-up that lists the files that are being modified by the AI operation and
          offers options for reviewing the changes. You can click <uicontrol>See changes</uicontrol>
          to open a visual comparison of the changes. Click <uicontrol>Accept changes</uicontrol> to
          accept the modifications or click <uicontrol>Reject changes</uicontrol> to revert all the
            modifications.<p id="p_l5f_fn5_cfc"><image href="../../img/ai-review-changes.png"
          /></p></li>
      </ul>
    </p>
    <p id="paraNote1">
      <note id="note_gcy_5zk_3bc" type="tip">You can also partially select content from the response
        area, then right-click to open the contextual menu, and use the <b>Insert/Replace</b>,
          <b>Preview</b>, or <b>Copy</b> actions on that partially selected content.</note>
    </p>
    <p id="para8">You can use the bottom chat input area to refine the response by sending a message
      to the AI platform and it will generate a new response based upon your message. You can edit
      your message by clicking the <uicontrol><image href="../../img/Edit16.png"/>Edit</uicontrol>
      button that appears to the right of your message in the response area. You would then edit
      your message and click <uicontrol>Submit</uicontrol> to regenerate the response. For multiple
      edited messages, you can use the <uicontrol><image href="../../img/Next16.png"
        />Next</uicontrol>/<uicontrol><image href="../../img/Previous16.png"/>Previous</uicontrol>
      buttons to navigate between chat threads.</p>
    <p id="para9">You can create your own favorite prompts and use supported variables to specify
      the content that is sent to the platform. You can use the <uicontrol><image
          href="../../img/ai-fav-drop18.png"/>Favorites</uicontrol> drop-down button to store a
      favorite prompt. You can use the <uicontrol><image href="../../img/ai-var-drop18.png"/>Insert
        Variables</uicontrol> drop-down button to select one of the supported variables:<ul
        id="ul_ytt_dxx_pxb">
        <li id="li_ztt_dxx_pxb"><b>${selection}</b> - Expands to the currently selected
          content.</li>
        <li id="li_gzp_rnf_mcc"><b>${selection-original}</b> - Expands to the currently selected
          content. If the current selected content contains track changes, they are rejected,
          resulting in the original version of the text.</li>
        <li id="li_hzp_rnf_mcc"><b>${selection-final}</b> - Expands to the currently selected
          content. If the current selected content contains track changes, they are accepted,
          resulting in the final version of the text.</li>
        <li id="li_a5t_dxx_pxb"><b>${document}</b> - Expands to the content of the entire document. </li>
        <li id="li_izp_rnf_mcc"><b>${attach(<filepath>filePath</filepath>)}</b> - Attaches a
          specified image (in <filepath>png</filepath> or <filepath>jpeg</filepath> format) or XML,
          Markdown, text, Word (<filepath>.docx</filepath>), Powerpoint
          (<filepath>.pptx</filepath>), or PDF file to the conversation. For Word and PDF files, the
          included images are also sent to the AI engine.</li>
      </ul></p>
    <p id="para10">The <uicontrol><image href="../../img/ai-Micro.png"/>Start recording prompt using
        the microphone</uicontrol> button allows you to record your voice, which is converted to a
      text prompt using the AI engine. After starting the recording, the button is changed to a
          <uicontrol><image href="../../img/ai-MicroStop.png"/>Stop</uicontrol> action that you use
      to stop the recording.<note id="note_r35_x2g_4fc">This button may not be available or may
        require setting extra connector-specific parameters.</note></p>
    <section id="chat-modes">
      <title>Chat Modes</title>
      <p>
        <div>
          <p>The <uicontrol>Chat Modes</uicontrol> drop-down menu allows you to select various modes
            for chatting with the AI: </p>
          <ul id="ul_mkb_kkb_yfc">
            <li><uicontrol>Agent</uicontrol> - Chat with the AI about your project, set goals, or
              give instructions. The AI proposes changes, and you decide what to keep.</li>
            <li><uicontrol>DITA Agent </uicontrol>- Chat with the AI about your DITA XML project,
              set goals, or give instructions. The AI explores your project to complete tasks
              efficiently, proposes a plan, and can make project-wide changes on your behalf, while
              you decide what to keep.</li>
            <li><uicontrol>Ask</uicontrol> - Find answers, get explanations, and make plans using
              the AI. This read-only mode has access to various search tools and uses them based on
              your current task.</li>
          </ul>
        </div>
      </p>
      <p>While chatting with the AI, you can change between chat modes to access more functionality.
        All chat modes automatically receive contextual information about your project's location,
        the location of the current document, its document type, and the location of the context
        DITA map. Additionally, if there is content selected in the main editor area when a chat is
        initiated, the selection is passed to the AI along with the document type to be used as
        context for the conversation.</p>
    </section>
    <section id="section_import_export_chat">
      <title>Export and Import Chats</title>
      <p id="p_ocj_3hs_cfc">A conversation with the AI can be exported to a JSON file using the
          <uicontrol>Export Chat</uicontrol> action (available in the <uicontrol>Actions</uicontrol>
        menu). The exported file includes helpful information such as details about the invoked
        action, its parameters, the tools available, the tool calls, the user and assistant
        messages, and, if applicable, the content that the action was invoked on.</p>
      <p id="p_pcj_3hs_cfc">You can import a conversation from a JSON file using the
          <uicontrol>Import Chat</uicontrol> action, allowing you to continue the conversation from
        that point.</p>
      <p id="p_qcj_3hs_cfc">These actions are particularly useful for debugging purposes. For
        instance, you can export a conversation and share it with the developer of a custom action
        to help them investigate any issues encountered. Once the issue is resolved, you can import
        the previous conversation and resume from where you left off.</p>
    </section>
    <section id="section_Generating-Doc-Drafts">
      <title>Generating Documentation Drafts</title>
      <p>The <uicontrol>AI Positron</uicontrol> add-on provides the ability to generate a documentation draft
        of a DITA topic based on a configuration file that tailors the draft generation process using a
        context, instructions, images, and other data. </p>
      <p>Once the add-on is installed, you can use the <uicontrol>New Document</uicontrol> wizard to
        create a new <uicontrol>AI Doc Draft Configuration</uicontrol> file, that can be edited in
          <uicontrol>Author</uicontrol> mode. Validation and content completion are automatically
        provided for such configuration files. The <uicontrol>Author</uicontrol> mode also renders
        short explanations for each element, as well as buttons for inserting the optional
        elements.</p>
      <p>After providing the configuration data, you can use the <uicontrol>Generate Documentation
          Draft</uicontrol> action to trigger the AI-based drafting process. Once the AI response is complete
        in the <uicontrol>AI Positron</uicontrol> side-view, click the <uicontrol><image
            href="../../img/New16.png" id="image_uvs_2cv_fcc"/>Create document</uicontrol> button to create a
        new DITA topic with content generated based upon the data in the configuration file.</p>
      <p>The simplest form of the configuration file would only contain the
          <xmlelement>title</xmlelement> and <xmlelement>draft-summary</xmlelement> that will be
        used by the AI as a starting point:
        <codeblock outputclass="language-xml" id="codeblock_simplest_config_file">&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;doc-draft>
  &lt;title>Generate Documentation Draft&lt;/title>
  &lt;instructions>
    &lt;draft-summary>The new "Generate Documentation Draft" action was added to the 
"Content Generation" category and can be used to draft a DITA documentation topic
using AI and a configuration file.&lt;/draft-summary>
  &lt;/instructions>
&lt;/doc-draft></codeblock></p>
      <p>Other data elements can be used to further configure the drafting process:
          <xmlelement>context</xmlelement>, <xmlelement>target audience</xmlelement>,
          <xmlelement>instructions</xmlelement>, <xmlelement>image</xmlelement>,
          <xmlelement>file</xmlelement>, and <xmlelement>similar-topic</xmlelement>.<note
          id="note_uy1_zlf_x1c" type="notice">
          <ul id="ul_lxg_npt_z2c">
            <li>For the <xmlelement>image</xmlelement> element, only a PNG, JPEG, and non-animated
              GIF image should be provided.</li>
            <li>
              <p>For the <xmlelement>file</xmlelement> element, you may provide a file in plain text
                format (including Markdown or XML) or in a document format (e.g. PDF, Word, or
                PowerPoint).</p>
            </li>
          </ul>
        </note><codeblock outputclass="language-xml" id="codeblock_bh3_cpf_x1c">&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;doc-draft>
  &lt;title>Generate Documentation Draft&lt;/title>
  &lt;context>I am working on the user manual of a software application called Oxygen XML Editor,
 used for authoring and publishing XML content.&lt;/context>
  &lt;prolog>
    &lt;metadata>
      &lt;audience>The audience of our user manual is very wide and includes 
people without a technical background.&lt;/audience>
    &lt;/metadata>
  &lt;/prolog>
  &lt;instructions>
    &lt;draft-summary>We have a new action in the contextual menu of the Project side-view,
 called "Format and Indent...", which can be used to pretty print multiple files at once. 
 The action is available in both the Oxygen XML Editor stand-alone distribution and the 
 Eclipse plug-in.&lt;/draft-summary>
    &lt;instruction>Analyze the following image and document the dialog box
 and all its components.&lt;/instruction>
    &lt;image href="format-and-indent-files.png"/>
    &lt;instruction>Add additional information based on the following file.&lt;/instruction>
    &lt;file href="format-and-indent-files-overview.docx"/>
    &lt;instruction>Also add a DITA "note" element that mentions the fact that this feature 
is not available for XQuery files.&lt;/instruction>
  &lt;/instructions>
  &lt;relationship-context>
    &lt;similar-topic href="spell-check-in-files.dita"/>
  &lt;/relationship-context>
&lt;/doc-draft></codeblock></p>
      <note id="note_j1b_wjh_mcc">Project retrieval functionality can be enabled for this action by
        setting the <codeph>use-related-content-from-project="true"</codeph> attribute on the
          <xmlelement>draft-summary</xmlelement> element. This can easily be done in the Author-mode
        rendering of the draft configuration file by selecting the <uicontrol>Use related content
          from project</uicontrol> checkbox located below the text area of the draft summary.</note>
    </section>
    <section id="section_Creating-Custom-Actions">
      <title>Creating Custom Actions</title>
      <p>In the AI Positron preferences page, you can define a reference to a folder that contains custom
        actions.</p>
      <p>Once the add-on is installed, the <uicontrol>New Document</uicontrol> wizard can be used to create
        either a new <uicontrol>AI Positron Custom Action</uicontrol> file that contains a custom action
        definition in JSON format or an <uicontrol>AI Positron Custom Actions List</uicontrol> that contains a
        JSON array with multiple defined actions. Validation and content completion are automatically provided
        for such custom action files. If the action definition files are saved in the custom actions folder
        defined in the <uicontrol>AI Positron</uicontrol> preferences page, the <uicontrol>AI
          Positron</uicontrol> view should automatically reload its <uicontrol>Actions</uicontrol> drop-down
        list to include them.</p>
      <p>The most simple action defines an action id, title, type, and
        prompt:<codeblock id="codeblock_z1m_gq4_wxb" outputclass="language-json">{
    "id": "my.action.id",
    "title": "Improve Grammar",
    "output-action": "replace",
    "prompt": "Improve grammar in the following content preserving the XML markup:"
}</codeblock></p>
    </section>
    <section id="distributing_ai_actions">
      <title>Distributing and Filtering AI Actions </title>
      <p id="p_jrr_www_z2c">When installed in <b>Oxygen</b> 27.1 or newer, plugins or frameworks can
        contain a folder named <filepath>ai-positron-actions</filepath> where custom AI actions are
        automatically loaded from by the AI Positron add-on.</p>
      <p id="p_krr_www_z2c">The <filepath>ai-positron-actions</filepath> folder can contain an extra
        file named <filepath>excluded-action-ids.txt</filepath>, which can list all action IDs (on a
        line-by-line basis) that should be filtered out of the AI Positron UI.</p>
    </section>
    <section id="section_enabling-RAG">
      <title>Tools and RAG Preferences</title>
      <p>Various settings related to the use of tools for retrieval augmented generation can be
        configured in the <uicontrol>Retrieval-Augmented Generation (RAG)</uicontrol> preferences
        page (click the <uicontrol><image href="../../img/Settings16.png"/>Settings</uicontrol>
        button in the header and go to <uicontrol>Retrieval-Augmented Generation
          (RAG)</uicontrol>).<dl id="dl_nmb_r5n_hcc">
          <dlentry>
            <dt>Enable tools</dt>
            <dd>Enables the use of tools for retrieval-augmented generation and for writing
              content in the project.<p>
                <dl>
                  <dlentry>
                    <dt>Enable project-based RAG</dt>
                    <dd>Enables retrieval-augmented generation based on similar content obtained
                      from the current open project. Actions and chat interactions generate content
                      give more precise and meaningful responses when this setting is enabled. It is
                      enabled by default. The available tools used for RAG are listed in the
                      text box.</dd>
                    <dd>
                      <p>The AI actions that use RAG are:<ul>
                          <li><uicontrol>Generate Documentation Draft</uicontrol></li>
                          <li><uicontrol>New DITA Topic</uicontrol></li>
                          <li><uicontrol>Expand Draft</uicontrol></li>
                          <li><uicontrol>Create Topics</uicontrol></li>
                        </ul></p>
                      <p>
                        <dl id="dl_anh_1q4_ddc">
                          <dlentry>
                            <dt>Ask for confirmation</dt>
                            <dd>When selected (default), the end user is asked to confirm whenever
                              each specific project-based RAG tool is about to be
                              processed.</dd>
                          </dlentry>
                          <dlentry>
                            <dt>Content retrieval token limit </dt>
                            <dd>Specifies a limitation for the upper amount of project content that
                              may be sent to the AI engine to enhance responses and tune them based
                              on the currently open project.</dd>
                          </dlentry>
                        </dl>
                      </p>
                    </dd>
                  </dlentry>
                  <dlentry id="fb-token">
                    <dt>Enable external RAG sources </dt>
                    <dd>Enables the use of external retrieval augmented generation sources.<p
                        id="p_f4b_xlv_2dc">
                        <dl id="dl_z4b_xlv_2dc">
                          <dlentry id="dlentry_apb_xlv_2dc">
                            <dt>Oxygen Feedback site token</dt>
                            <dd>
                              <p id="p_bpb_xlv_2dc">When the <uicontrol>Oxygen Feedback</uicontrol>
                                product is used to provide search functionality for a web site
                                generated from the <b>DITA XML</b> project, its search system can be
                                used to retrieve related content. In the <uicontrol>Oxygen
                                  Feedback</uicontrol> administrative interface, find the
                                installation instructions for the site version that you want to use
                                (click the <uicontrol>Installation</uicontrol> button on your
                                version's tile in the <xref
                                  href="https://www.oxygenxml.com/doc/ug-feedback-cloud/topics/ofb-version-management.html"
                                  format="html" scope="external">Site <uicontrol>Version</uicontrol>
                                  page</xref>). The installation information contains a unique
                                  <codeph>deploymentToken</codeph> value that can be copied and
                                pasted into the <uicontrol>Oxygen Feedback site token</uicontrol>
                                field.</p>
                            </dd>
                          </dlentry>
                          <dlentry id="dlentry_cpb_xlv_2dc">
                            <dt>Oxygen Feedback site description</dt>
                            <dd>A description for this external content retrieval site that is
                              passed to the AI engine to help it decide whether or not the external
                              source is used.</dd>
                          </dlentry>
                        </dl>
                      </p></dd>
                  </dlentry>
                  <dlentry>
                    <dt>Enable writing content in project</dt>
                    <dd>Allows tools that can be used by the AI to write content in the current
                      project. The available tools used for this purpose are listed in the text
                      box.</dd>
                  </dlentry>
                  <dlentry>
                    <dt>Limit read/write access to</dt>
                    <dd>Allows you to restrict the locations where tools can read and write
                      content. You can specify these locations as a comma-separated list of resource
                      paths. By default, read and write access is restricted to the project
                      directory and the directory of the current root map.</dd>
                  </dlentry>
                </dl>
              </p></dd>
          </dlentry>
        </dl></p>
    </section>
    <section id="section_record-changes">
      <title>Creating Custom Prompts/Actions by Recording Changes</title>
      <p>The <uicontrol><image href="../../img/ai-record18.png" id="image_cgj_cz3_zyb"
          />Record</uicontrol> button in the top-left corner of the view allows you to create new AI
        actions. It opens the <uicontrol>Record examples for instructions</uicontrol> dialog box
        where you can provide a set of instructions that are intended for the AI to follow. Then,
        after clicking the <uicontrol>Start recording</uicontrol> button at the bottom of the dialog
        box, you can record a collection of examples in the editing area that will help the AI
        better follow the given instructions. The examples are recorded from the changes made in the
        open editors. </p>
      <p>After providing examples, you need to click the <uicontrol><image
            href="../../img/ai-stop-record18.png" id="image_dgj_cz3_zyb"/>Record</uicontrol> button
        again to stop the recording. You will then have the opportunity to save the final result as
        either a Positron action or as a favorite chat prompt.</p>
      <p>For example, if you want to add DITA markup to menu cascades, you can follow these
          steps:<ol id="ol_egj_cz3_zyb">
          <li>Click the <uicontrol><image href="../../img/ai-record18.png" id="image_fgj_cz3_zyb"
              />Record</uicontrol> button.</li>
          <li>In the <uicontrol>Record examples for instructions</uicontrol> dialog box, enter some
            instructions like: <i>You are a technical writer. Add DITA markup to menu
            cascades.</i></li>
          <li>Click <uicontrol>Start recording</uicontrol>.</li>
          <li>Open a DITA topic that has a menu cascade without markup (for example: <codeph>File >
              Export</codeph>).</li>
          <li>Edit the topic and add markup, transforming it to:
            <codeblock outputclass="language-xml" id="codeblock_ggj_cz3_zyb">&lt;menucascade>
  &lt;uicontrol>File&lt;/uicontrol>
  &lt;uicontrol>Export&lt;/uicontrol>
&lt;/menucascade></codeblock></li>
          <li>Click the <uicontrol><image href="../../img/ai-stop-record18.png"
                id="image_hgj_cz3_zyb"/>Record</uicontrol> button again to stop the recording. The
            system generates the following instructions with
            examples:<codeblock outputclass="language-xml" id="codeblock_igj_cz3_zyb">You are a technical writer. Add DITA markup to a menu cascades.
###
Input:
        &lt;p>File > Export&lt;/p>

Output:
      &lt;p>&lt;menucascade>&lt;uicontrol>File&lt;/uicontrol>
      &lt;uicontrol>Export&lt;/uicontrol>&lt;/menucascade>&lt;/p>

Input: ${selection}
Output:
</codeblock></li>
          <li>In the resulting dialog box, save the final result as either a Positron action or as a
            favorite chat prompt.</li>
        </ol></p>
      <note> Administrators can hide the <uicontrol><image href="../../img/ai-record18.png"
            id="image_cgj_cz3_zyb2"/>Record examples for instructions</uicontrol> button to prevent
        its use by <xref href="../custom_options.dita">setting a custom option</xref>.</note>
    </section>
    <section id="section_change-tracking">
      <title>Change Tracking Limitations/Behavior</title>
      <p>Change tracking and comments are serialized as <xref
          href="https://www.oxygenxml.com/doc/ug-editor/topics/track-changes-format.html"
          format="html" scope="external">processing instructions</xref> in XML documents. When
        processing content from XML documents opened in the <uicontrol>Author</uicontrol> visual
        editor mode, the AI engine receives the XML content with the change tracking and comment
        processing instructions present inside of it. However, all changes made by the AI engine to
        the processed XML content are previewed and inserted with change tracking turned <b>off</b>
        in the document.</p>
    </section>
    <section id="section_security">
      <title>Security</title>
      <p>All possibly confidential user-specific content (history list, favorite prompts, local
        caches for improving speed) is stored encrypted and cannot be exported and used by
        others.</p>
    </section>
    <!--Notes-->
    <p>
      <note id="note_qpr_zj4_2xb">Content received from AI models may be inaccurate or contain
        misleading information, so it needs to be thoroughly reviewed and revised
        accordingly.</note>
    </p>
    <p id="p_install-note">
      <note id="note_d51_knq_jfc">The <b>Oxygen AI Positron</b> plugin for <b>Eclipse</b> requires
          <b>Oxygen XML Editor/Author/Developer</b> for <b>Eclipse</b> version 27.1 or newer.</note>
    </p>
    <section id="section_custom-xpath-functions">
      <title>Custom XPath Functions </title>
      <p id="p_k1x_jk3_qxb">The add-on contributes some XPath extension functions (available in the
        content completion proposals for Schematron, XSLT, XQuery, and XPath) that can be used to
        rephrase content, perform validation checks on existing content, or to invoke an AI
        action:</p>
      <p id="p_adr_nl3_qxb">
        <dl id="dl_kbv_nl3_qxb">
          <dlentry id="dlentry_lbv_nl3_qxb">
            <dt><codeph>ai:transform-content(system, (user, assistant,)* user)</codeph></dt>
            <dd>
              <p id="p_fxy_5l3_qxb">Use this function from namespace
                  <i>http://www.oxygenxml.com/ai/function</i> to automatically transform content
                using AI.</p>
              <p id="p_erd_vl3_qxb">The function has the string parameters:<ul id="ul_pjk_wl3_qxb">
                  <li id="li_qjk_wl3_qxb"><codeph>system</codeph> - This parameter is used to set up
                    the context or provide instructions for the AI model. It can include guidelines,
                    rules, or any other information that affects how the model should interpret
                    inputs and generate outputs.</li>
                  <li id="li_fs5_mx5_cbc"><codeph>user</codeph> - This parameter represents the
                    input from the human user. The user's input guides the conversation and prompts
                    a response from the assistant (AI model). This input is typically what you want
                    to transform or have addressed by the AI.</li>
                  <li id="li_xwh_yl3_qxb"><codeph>assistant</codeph> - This parameter represents the
                    responses or actions from the AI model (assistant) based on the user's input and
                    the context set by the system. Multiple <codeph>assistant</codeph> parameters
                    can be provided to represent different stages or turns in the conversation.</li>
                </ul></p>
              <p id="p_cps_zl3_qxb">It returns a string that represents the transformed content.</p>
              <p id="p_l1x_jk3_qxb">Here is an example of a custom Schematron schema that uses the
                  <codeph>transform-content</codeph> function to correct the number of words used in
                a short
                description:<codeblock outputclass="language-xml">&lt;sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron" queryBinding="xslt3"
    xmlns:sqf="http://www.schematron-quickfix.com/validator/process">
    &lt;sch:ns uri="http://www.oxygenxml.com/ai/function" prefix="ai"/>
    &lt;sch:pattern>
        &lt;sch:rule context="shortdesc">
            &lt;sch:report test="count(tokenize(.,'\s+')) > 50" sqf:fix="rephrase">
      The phrase must contain less than 50 words.&lt;/sch:report>
            &lt;sqf:fix id="rephrase">
                &lt;sqf:description>
                    &lt;sqf:title>Rephrase phrase to be less that 50 words&lt;/sqf:title>
                &lt;/sqf:description>
                &lt;sqf:replace match="text()" select="ai:transform-content(
                'Reformulate phrase to be less that 50 words', .)">&lt;/sqf:replace>
            &lt;/sqf:fix>
        &lt;/sch:rule>
    &lt;/sch:pattern>
&lt;/sch:schema> </codeblock></p>
            </dd>
          </dlentry>
          <dlentry id="dlentry_bln_dm3_qxb">
            <dt><codeph>ai:verify-content(system, (user, assistant,)* user)</codeph></dt>
            <dd>
              <p id="p_er3_fm3_qxb">Use this function from namespace
                  <i>http://www.oxygenxml.com/ai/function</i> to automatically validate content
                using AI.</p>
              <p id="p_v1b_mm3_qxb">The function has two string parameters:<ul id="ul_eyc_nyd_rcc">
                  <li id="li_fyc_nyd_rcc"><codeph>system</codeph> - This parameter is used to set up
                    the context or provide instructions for the AI model. It can include guidelines,
                    rules, or any other information that affects how the model should interpret
                    inputs and generate outputs.</li>
                  <li id="li_gyc_nyd_rcc"><codeph>user</codeph> - This parameter represents the
                    input from the human user. The user's input guides the conversation and prompts
                    a response from the assistant (AI model). This input is typically what you want
                    to transform or have addressed by the AI.</li>
                  <li id="li_hyc_nyd_rcc"><codeph>assistant</codeph> - This parameter represents the
                    responses or actions from the AI model (assistant) based on the user's input and
                    the context set by the system. Multiple <codeph>assistant</codeph> parameters
                    can be provided to represent different stages or turns in the conversation.</li>
                </ul></p>
              <p id="p_mmt_nm3_qxb">It returns a boolean value that represents the result of the
                validation.</p>
              <p id="p_sh5_pm3_qxb">Here is an example of a custom Schematron schema that uses the
                  <codeph>verify-content</codeph> function to check a short description for
                instances of a passive
                voice:<codeblock outputclass="language-xml">&lt;sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron" queryBinding="xslt3"
  xmlns:sqf="http://www.schematron-quickfix.com/validator/process">
  &lt;sch:ns uri="http://www.oxygenxml.com/ai/function" prefix="ai"/>    
  &lt;sch:pattern>
    &lt;sch:rule context="shortdesc">
      &lt;sch:report test="ai:verify-content('Does the following content has passive voice?', .)"
            sqf:fix="rephrase">The phrase uses passive voice.&lt;/sch:report>
      &lt;sqf:fix id="rephrase">
         &lt;sqf:description>&lt;sqf:title>Rephrase text to be active voice&lt;/sqf:title>
&lt;/sqf:description>
         &lt;sqf:replace match="text()"
                select="ai:transform-content('Rephrase text to be active voice', .)"/>
         &lt;/sqf:fix>
      &lt;/sch:rule>
  &lt;/sch:pattern>
&lt;/sch:schema> </codeblock></p>
            </dd>
          </dlentry>
          <dlentry>
            <dt><codeph>ai:invoke-action(actionId, extraPrompt, content)</codeph></dt>
            <dd>
              <p>Use this function from namespace <i>http://www.oxygenxml.com/ai/function</i> to
                invoke a predefined AI action on a specified content.</p>
              <p>The function has the string parameters:<ul id="ul_jc1_fbg_c2c">
                  <li><codeph>actionId</codeph> - The ID of the action to call (string).</li>
                  <li><codeph>extraPrompt</codeph> - An extra prompt to give to the action as a
                    context. It gets expanded at the beginning of the action's prompt (string).</li>
                  <li><codeph>content</codeph> - The content to process using the action
                    (string).</li>
                </ul></p>
              <p>It returns a string that represents the content returned by the action.</p>
            </dd>
          </dlentry>
        </dl>
      </p>
    </section>
    <section id="section_xpath-functions-preferences">
      <title>XPath Functions Preferences</title>
      <p>
        <dl>
          <dlentry>
            <dt>Enable XPath Functions</dt>
            <dd>Enables the use of AI-specific XPath functions in <b>Oxygen</b> when applying
              Schematron validation or XSLT transformations.<p id="p_n1f_dpd_dbc">
                <dl id="dl_m1z_kvr_jyb">
                  <dlentry id="dlentry_o1f_dpd_dbc">
                    <dt>Cache responses and reuse them for identical prompts</dt>
                    <dd>If enabled (default), responses for identical requests are stored (cached),
                      resulting in fewer requests being sent to the AI server and faster completion
                      times. A <uicontrol>Clear cache</uicontrol> button located to the right of
                      this option can be used to clear the cache.</dd>
                  </dlentry>
                  <dlentry id="dlentry_p1f_dpd_dbc">
                    <dt>Cache size</dt>
                    <dd>Specifies a maximum limit for the cache size.</dd>
                  </dlentry>
                  <dlentry id="dlentry_q1f_dpd_dbc">
                    <dt>Notify me when the number of requests exceeds</dt>
                    <dd>You can select this option and specify a number of AI requests that when
                      exceeded, a confirmation dialog box is displayed asking if you want to
                      continue using the XPath AI functions. If you select "No" for the answer, the
                      XPath functions will be disabled.</dd>
                  </dlentry>
                </dl>
              </p></dd>
          </dlentry>
        </dl>
      </p>
    </section>
    <p id="gemini_connector_selected">If <b>Google Gemini</b> is chosen as the connector type, the following settings are available:</p>
    <p id="gemini_connector_settings">
      <dl>
        <dlentry id="dlentry_bg2_v1l_1fc2">
          <dt>Base URL</dt>
          <dd>The web address where the connector service is located. By default, it is <codeph>https://generativelanguage.googleapis.com/</codeph>.</dd>
        </dlentry>
        <dlentry id="dlentry_wmm_nvw_nfc">
          <dt>API Key</dt>
          <dd>The API key required for authenticating. It can be generated in <xref href="https://aistudio.google.com/app/apikey" format="html" scope="external">Google AI Studio</xref>.</dd>
        </dlentry>
        <dlentry id="dlentry_dfj_svw_nfc">
          <dt>Default model</dt>
          <dd>Use this drop-down to select the <xref
              href="https://ai.google.dev/gemini-api/docs/models" format="html" scope="external"
              >Google Gemini</xref> default model to be used for the chat view and for actions that
            do not explicitly specify a model.</dd>
        </dlentry>
      </dl>
    </p>
    <p id="grok_connector_selected">If <b>xAI Grok</b> is chosen as the connector type, the following settings are available:</p>
    <p id="grok_connector_settings">
      <dl>
        <dlentry>
          <dt>Base URL</dt>
          <dd>The web address where the service is located. By default, it is <codeph>https://api.x.ai</codeph>.</dd>
        </dlentry>
        <dlentry>
          <dt>API Key</dt>
          <dd>The API key required to authenticate with the xAI Grok service.</dd>
        </dlentry>
        <dlentry>
          <dt>Default model</dt>
          <dd>Use this drop-down to select the <xref href="https://docs.x.ai/docs/models"
              format="html" scope="external">xAI Grok</xref> default model to be used for the chat
            view and for actions that do not explicitly specify a model.</dd>
        </dlentry>
      </dl>
    </p>
  </body>
</topic>
